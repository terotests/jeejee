(function(){var __amdDefs__={},_e_prototype=function(){!function(t){t.add=function(t){if(this._contentObj)return this._contentObj.add.apply(this._contentObj,Array.prototype.slice.call(arguments));t instanceof Array||(t=Array.prototype.slice.call(arguments,0));var e=this;return t.forEach(function(t){if(e.isFunction(t)){var n=_e(),i=t.apply(n,[e]);t=i?i:n}if("string"==typeof t||!isNaN(t)){var r=_e("span");return r._dom.innerHTML=t,e.add(r),e}if(e.isStream(t))return t.onValue(function(t){e.add(t)}),e;if("undefined"!=typeof t&&"undefined"!=typeof t._dom){t._parent&&t._parent.removeChild(t),e._children||(e._children=[]);var s=e._children.length;if(t._index=s,e._children.push(t),t._parent=e,t._svg=e._svg,t._customElement&&t._initWithDef&&t._initWithDef.componentWillMount&&t._initWithDef.componentWillMount.apply(t,[]),e._dom.appendChild(t._dom),t._customElement){if(!t._initWithDef){var o,a=t._customElement;t._customElement.customTag&&(o=t._findCustomElem(t._customElement.customTag)),o===a&&(a=null);var c=o||t._customElement;t._initWithDef&&t._initWithDef==c||e._initCustom(t,o||t._customElement,e,t._customAttrs||{},a)}t._initWithDef&&t._initWithDef.componentDidMount&&t._initWithDef.componentDidMount.apply(t,[])}t._contentObj&&(t._contentObj._contentParent=e),t.trigger("parent",e),e.trigger("child",t)}}),this},t.addItem=function(){var t=Array.prototype.slice.call(arguments,0);return this.add.apply(this,t)},t.clear=function(){if(this._contentObj)return this._contentObj.clear.apply(this._contentObj,Array.prototype.slice.call(arguments));for(this._children.forEach(function(t){t.remove()}),this._children=[];this._dom.firstChild;)this._dom.removeChild(this._dom.firstChild);return this},t.collectFromDOM=function(t){for(var e=_e(t),n=t.childNodes.length,i=t.attributes.length,r=0;i>r;r++){var s=t.attributes[r];e.q.attr(s.name,s.value)}var o=t.className;if(o){o+=" ";for(var a=o.split(" "),c=a.length,r=0;c>r;r++){var s=a[r];s&&e.addClass(s)}}(t.innerText||t.textContent)&&e.text(t.innerText||t.textContent);for(var r=0;n>r;r++){var h=t.childNodes[r];e.add(this.collectFromDOM(h))}return e},t.insertAfter=function(t){if(this._parent&&this._parent._children&&t!=this){var e=this._index,n=this._parent._children;if(t._parent&&t._parent!=this._parent){t._parent.removeChild(t);var e=n.indexOf(this);n.splice(e+1,0,t),this._parent.reIndex()}else{if(t._parent){var i=n.indexOf(t);n.splice(i,1);var e=n.indexOf(this);n.splice(e+1,0,t)}else t._parent=this._parent,n.splice(e+1,0,t);this._parent.reIndex()}var r=t._dom,s=this._dom;s.parentNode.insertBefore(r,s.nextSibling)}},t.insertAt=function(t,e){if(t<this._children.length){var n=this.child(t);n.insertBefore(e)}else this.add(e)},t.insertBefore=function(t){if(this._parent&&this._parent._children&&t!=this){var e=this._index,n=this._parent._children;if(t._parent&&t._parent!=this._parent){t._parent.removeChild(t),t._parent=this._parent;var e=n.indexOf(this);n.splice(e,0,t),this._parent.reIndex()}else{if(t._parent){var i=n.indexOf(t);i>=0&&n.splice(i,1);var e=n.indexOf(this);n.splice(e,0,t)}else t._parent=this._parent,n.splice(e,0,t);this._parent.reIndex()}var r=t._dom,s=this._dom;return s.parentNode.insertBefore(r,s),this}},t.moveDown=function(){if("undefined"!=typeof this._index&&this._parent){var t=this._index;if(!this._parent)return;if(!this._parent._children)return;if(t>=this._parent._children.length-1)return;if(this._parent._children){var e=this._parent._children[t+1];e._index--,this._index++;var n=this._parent._children;n.splice(t+1,0,n.splice(t,1)[0]);var i=e._dom,r=this._dom;r.parentNode.insertBefore(r,i.nextSibling)}}},t.moveUp=function(){if(this._index&&this._parent){var t=this._index;if(!t)return;if(0>=t)return;if(this._parent._children){var e=this._parent._children[t-1];e._index++,this._index--;var n=this._parent._children;n.splice(t-1,0,n.splice(t,1)[0]);var i=e._dom,r=this._dom;i.parentNode.insertBefore(r,i)}}},t.parent=function(t){if(this._contentParent)return this._contentParent;var e=this._parent;return e&&e._contentParent&&!t?e._contentParent:e},t.prepend=function(t){if(this._contentObj)return this._contentObj.prepend.apply(this._contentObj,Array.prototype.slice.call(arguments));t instanceof Array||(t=Array.prototype.slice.call(arguments,0));var e=this;return t.forEach(function(t){if("string"==typeof t)return e._dom.innerHTML=t,e;if("undefined"!=typeof t&&"undefined"!=typeof t._dom){t._parent&&t._parent.removeChild(t),e._children||(e._children=[]),t._index=0,e._children.unshift(t),t._parent=e,e._dom.insertBefore(t._dom,e._dom.firstChild);for(var n=e._children.length,i=0;n>i;i++)e._children[i]._index=i;t.trigger("parent",e),e.trigger("child",t)}}),this},t.reIndex=function(){for(var t=this._children,e=0,n=t.length,e=0;n>e;e++)this._children[e]._index=e},t.remove=function(){if(this._initWithDef&&this._initWithDef.componentWillUnmount&&this._initWithDef.componentWillUnmount.apply(this,[]),this.removeChildEvents(),this._parent)this._parent.removeChild(this);else{var t=this._dom.parentElement;t&&t.removeChild(this._dom)}this._children=[],this.removeAllHandlers()},t.removeChild=function(t){if(this._contentObj)return this._contentObj.removeChild.apply(this._contentObj,Array.prototype.slice.call(arguments));if(this._children){var e=this._children.indexOf(t);e>=0&&(this._children.splice(e,1),this._dom.removeChild(t._dom)),this.reIndex()}},t.removeChildEvents=function(){this.forChildren(function(t){t._initWithDef&&t._initWithDef.componentWillUnmount&&t._initWithDef.componentWillUnmount.apply(t,[]),t.removeAllHandlers(),t.removeChildEvents(),t.removeControllersFor(t)})},t.removeIndexedChild=function(t){if(this._contentObj)return this._contentObj.removeIndexedChild.apply(this._contentObj,Array.prototype.slice.call(arguments));if(this._children){var e=this._children.indexOf(t);e>=0&&this._children.splice(e,1)}},t.replaceWith=function(t){var e=this.parent();if(e){var n=e._children.indexOf(this);e._dom.replaceChild(t._dom,this._dom),e._children.splice(n,1,t),t._parent=e,t._svg=this._svg}}}(this),function(t){var e;t.baconDrag=function(){var t=this;return Bacon.fromBinder(function(e){t.drag(function(t){e(t)})})},t.drag=function(t,e){var n=this,i={};if(this.isObject(t)&&!this.isFunction(t)){var r,s,o=t;t=function(t){t.start&&(r=o.x(),s=o.y()),o.x(r+t.dx).y(s+t.dy)}}var a,c;return this.draggable(function(r,s){i.item=n,i.sx=s.x,i.sy=s.y,i.mx=s.mx,i.my=s.my,i.dx=0,i.dy=0,i.x=s.x,i.y=s.y,i.start=!0,i.end=!1;var o=n.findTransform(null,!0);if(!e&&o.length>0&&"undefined"!=typeof Matrix3D){a=Matrix3D(),o.forEach(function(t){a.matMul(t)}),c=n.findScreen();var h=a.dragTransformation(i,c);i.sx=h.sx,i.sy=h.sy,i.x=h.x,i.y=h.y,i.dx=h.dx,i.dy=h.dy}else a=null;t(i)},function(n,r){if(i.start=!1,i.dx=r.dx,i.dy=r.dy,i.mx=r.mx,i.my=r.my,i.x=i.sx+i.dx,i.y=i.sy+i.dy,!e&&a){var s=a.dragTransformation(i,c);i.sx=s.sx,i.sy=s.sy,i.x=s.x,i.y=s.y,i.dx=s.dx,i.dy=s.dy}t(i)},function(n,r){if(i.end=!0,i.dx=r.dx,i.dy=r.dy,i.mx=r.mx,i.my=r.my,!e&&a){var s=a.dragTransformation(i,c);i.sx=s.sx,i.sy=s.sy,i.x=s.x,i.y=s.y,i.dx=s.dx,i.dy=s.dy}t(i)}),this},t.draggable=function(t,e,n){var i=this.__singleton();i.draggable(this),t&&this.on("startdrag",t),e&&this.on("drag",e),n&&this.on("enddrag",n)},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){this._touchItems=[]}),t.mousePos=function(){e||(e={});var t=this.offset(),n=this.__singleton(),i=n.mouse();return e.sx=i.x,e.sy=i.y,e.x=i.x-t.left,e.y=i.y-t.top,e},t.pauseEvents=function(t){return t=t||window.event,t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1},t.touch=function(t){return this._touchItems[t]},t.touchclick=function(){this.touchevents();this.on("touchstart",function(t){t.trigger("click")})},t.touchevents=function(){var t=this._dom;if(t.addEventListener){var e=this;this._touchItems=[];var n=function(t){var n=t.touches;t.targetTouches&&(n=t.targetTouches),e._touchCount=n.length,e._touchItems.length=e._touchCount;for(var i=0;i<n.length;i++){var r={};r.startX=n[0].pageX,r.startY=n[0].pageY,r.startMs=(new Date).getTime(),e._touchItems[i]=r}return e.trigger("touchstart"),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1,!1},i=function(t){var n=t.touches;t.targetTouches&&(n=t.targetTouches),e._touchCount=n.length;for(var i=0;i<n.length;i++){var r=e._touchItems[i];r&&(r.dx=t.touches[i].pageX-r.startX,r.dy=t.touches[i].pageY-r.startY)}if(e._touchCount>1){var s={items:e._touchItems};e.trigger("pinch",s)}return e.trigger("touchmove"),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!1},r=function(t){return e.trigger("touchend"),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1,!1};t.addEventListener("touchstart",n,!1),t.addEventListener("touchmove",i,!1),t.addEventListener("touchend",r,!1)}}}(this),function(t){t.absolute=function(){return this.q.css("position","absolute"),this.x(0).y(0).z(this.baseZ()),this},t.baseZ=function(t){return"undefined"!=typeof t?(this._baseZ=t,this):("undefined"==typeof this._baseZ&&(this._baseZ=0),this._baseZ)},t.box=function(){var t={left:0,top:0,width:800,height:800},e=this._dom;try{"undefined"!=typeof e.getBoundingClientRect&&(t=e.getBoundingClientRect())}catch(n){t={left:0,top:0,width:800,height:800}}return t},t.height=function(t){if(this._contentObj)return this._contentObj.height.apply(this._contentObj,Array.prototype.slice.call(arguments));if("undefined"==typeof t)return this._h;if(this.isStream(t)){var e=this;return t.onValue(function(t){e.height(t)}),this}if(this.isFunction(t)){var n=t(!1,!0),e=this;return n.me.on(n.name,function(t,n){e.height(n)}),this.height(t()),this}if("auto"==t)return this._dom.style.height=t,this._h=t,this;if(t.slice){if("%"==t.slice(-1))return this._dom.style.height=t,this;if("em"==t.slice(-2))return this._dom.style.height=t,this}var i=this.pxParam(t);return"undefined"!=typeof i&&(this._dom.style.height=i,this._h=parseInt(t),this.trigger("height")),this},t.hoverLayer=function(t,e){var n=_e().absolute(),i=this.__singleton();n._dom.zIndex=e||1e5,t&&(n.addClass("Hoverlayer"),n.draggable(function(){console.log("hover, start drag")},function(){console.log("dragging ")},function(){console.log("end drag")}),n.bindSysEvent("mouseenter",function(){n.trigger("mouseenter")},!0),n.bindSysEvent("mouseleave",function(){n.trigger("mouseleave")},!0),n.bindSysEvent("click",function(){n.trigger("click")},!0),n.bindSysEvent("mousedown",function(){n.trigger("mousedown"),i.dragMouseDown(n)},!0),n.bindSysEvent("mouseup",function(){n.trigger("mouseup"),i.dragMouseUp()},!0));var r=this.offset();n.width(r.width),n.height(r.height);var s=_e().relative();return this.insertBefore(s),s.add(n),n},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){}),t.offset=function(){var t=document.documentElement,e=(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0),n=(window.pageYOffset||t.scrollTop)-(t.clientTop||0),i=this.box();return{top:i.top+n,left:i.left+e,width:i.width,height:i.height}},t.pxParam=function(t){if("string"==typeof t)return parseInt(t)+"px";var e=parseInt(t);return isNaN(e)?void 0:e+"px"},t.relative=function(){return this.q.css("position","relative"),this.x(0).y(0).z(this.baseZ()),this},t.width=function(t){if(this._contentObj)return this._contentObj.width.apply(this._contentObj,Array.prototype.slice.call(arguments));if("undefined"==typeof t)return this._w;if(this.isStream(t)){var e=this;return t.onValue(function(t){e.width(t)}),this}if(this.isFunction(t)){var n=t(!1,!0),e=this;return n.me.on(n.name,function(t,n){e.width(n)}),this.width(t()),this}if("auto"==t)return this._dom.style.width=t,this._w=t,this;if(t.slice){if("%"==t.slice(-1))return this._dom.style.width=t,this;if("em"==t.slice(-2))return this._dom.style.width=t,this}var i=this.pxParam(t);return"undefined"!=typeof i&&(this._dom.style.width=i,this._w=parseInt(t),this.trigger("width")),this},t.x=function(t){if(this.isStream(t)){var e=this;return t.onValue(function(t){e.x(t)}),this}if("undefined"!=typeof t){if(this._svgElem){var n=this.getTransform();this._y||(this._y=0),this._x||(this._x=0);var i=t-this._x;return this._x=t,0!=i&&(n.translate(i,0),this.q.attr("transform",n.getSvgTransform()),this.trigger("x")),this}return this.q.css("left",t+"px"),this._x=t,this.trigger("x"),this}return"undefined"==typeof this._x&&(this._x=0),this._x},t.y=function(t){if(this.isStream(t)){var e=this;return t.onValue(function(t){e.y(t)}),this}if("undefined"!=typeof t){if(this._svgElem){var n=this.getTransform();this._y||(this._y=0),this._x||(this._x=0);var i=t-this._y;return this._y=t,0!=i&&(n.translate(0,i),this.q.attr("transform",n.getSvgTransform()),this.trigger("y")),this}return this.q.css("top",t+"px"),this._y=t,this.trigger("y"),this}return"undefined"==typeof this._y&&(this._y=0),this._y},t.z=function(t){if(this.isStream(t)){var e=this;return t.onValue(function(t){e.z(t)}),this}var n=this._baseZ||0;return"undefined"!=typeof t?(this.q.css("zIndex",t+n),this._z=t,this.trigger("z"),this):("undefined"==typeof this._z&&(this._z=0),this._z)}}(this),function(t){var e,n,i;t._resetProjection=function(t,e){if(t.has3D){if(e){var n=this.offset();t.offset||(t.offset={}),t.offset.x=n.left,t.offset.y=n.top,t.screenWidth=n.width,t.screenHeight=n.height,t.width=n.width,t.height=n.height}if(t.lastWidth!=t.width||t.lastHeight!=t.height){var i=parseInt(t.width/2),r=parseInt(t.height/2);this._dom.style.perspectiveOrigin=i+"px "+r+"px ",this._dom.style.transformStyle="preserve-3d",t.lastWidth=t.width,t.lastHeight=t.height,t.has3D=!0}}},t.applyTransforms=function(t){var e=this._dom;return e.style.transform=t,e.style["-webkit-transform"]=t,e.style["-moz-transform"]=t,e.style["-ms-transform"]=t,this.trigger("transform"),this},t.compStyle=function(){var t=this._dom,e=window.getComputedStyle(t,null);return{get:function(t){return e.getPropertyValue(t)}}},t.createEffect=function(t,n,i,r){css().bind("."+t+"OutPosition",i),css().bind("."+t+"InPosition",n),r=r||{},r.duration=r.duration||.2,css().animation(t+"Out",{duration:2*r.duration.toFixed(2)+"s","iteration-count":1},n,.5,i,i),css().animation(t+"In",{duration:2*r.duration.toFixed(2)+"s","iteration-count":1},i,.5,n,n),e[t]=r},t.css=function(t){if(this._contentObj)return this._contentObj.css.apply(this._contentObj,Array.prototype.slice.call(arguments));if(n||(n={},i=1),this._myClass||(this._myClass="css_"+this.guid()),t){this._cssNs||(this._cssNs={});var e=this._cssNs[t];if(e)return e;var r=this._myClass+"_"+t;n[r]||(n[r]=i++);var s=this._myClass+"_"+n[r];return e=css(s),this._cssNs[t]=e,e._nameSpace=s,e}return this._css||(this._css=css(this._myClass),this.addClass(this._myClass)),this._css},t.effectIn=function(t,n){if(this._effectOn||(this._effectOn={}),!this._effectOn[t]){if(!this._effectState)return this._effectState={},void(this._effectState[t]=1);if(1!=this._effectState[t]){this._effectOn[t]=(new Date).getTime();var i=e[t],r=t+"Out",s=t+"In",o=t+"InPosition",a=t+"OutPosition";this.removeClass(r),this.removeClass(s),this.addClass(s);var c=this;later().after(i.duration,function(){c.removeClass(a),c.addClass(o),c.removeClass(s),c._effectOn[t]=0,c._effectState[t]=1,n&&n()})}}},t.effectOut=function(t,n){if(this._effectOn||(this._effectOn={}),!this._effectOn[t]&&(this._effectState||(this._effectState={},this._effectState[t]=1),2!=this._effectState[t])){this._effectOn[t]=(new Date).getTime();var i=e[t],r=t+"Out",s=t+"In",o=t+"InPosition",a=t+"OutPosition";this.removeClass(r),this.removeClass(s),this.addClass(r);var c=this;later().after(i.duration,function(){c.removeClass(o),c.addClass(a),c.removeClass(r),c._effectOn[t]=0,c._effectState[t]=2,n&&n()})}},t.findScreen=function(){if(this._screenDefinition){var t=this._screenDefinition,e=this.offset();return t.offset||(t.offset={}),t.offset.x=e.left,t.offset.y=e.top,t.screenWidth=e.width,t.screenHeight=e.height,t.width=e.width,t.height=e.height,this._resetProjection(t),t}var n=this.parent();return n?n.findScreen():{screenWidth:1e3,screenHeight:1e3,perspective:101133300,offset:{x:0,y:0}}},t.findTransform=function(t,e){t||(t=[]),e||this._transformMatrix&&t.unshift(this._transformMatrix);var n=this._parent;return n&&n.findTransform(t),t},t.hide=function(){this._dom.style.display="none",this.trigger("hide")},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){e||(e={})}),t.scale=function(){this.setTransformOrigion(0,0)},t.setProjectionScreen=function(t){t=t||{};var e=!1;t.perspective?(e=!0,this._dom.style.perspective=t.perspective+"px",this._dom.style.webkitPerspective=t.perspective+"px"):t.perspective=101133300,(t.has3D||e)&&(t.width&&t.height&&this._resetProjection(t),t.has3D=!0),this._screenDefinition=t;var n=this;n.on("width",function(){n._resetProjection(t,!0)}),n.on("height",function(){n._resetProjection(t,!0)})},t.setTransformMatrix=function(t,e){if(this._transformMatrix)return this._transformMatrix.removeListener(this._matrixHandler),t.onChange(this._matrixHandler),this._transformMatrix=t,this;this._transformMatrix=t,this._use3D=e;var n=this;return this._matrixHandler=function(t){n.updateTransFromMatrix(t)},t.onChange(this._matrixHandler),this},t.show=function(){this._dom.style.display="",this.trigger("show")},t.style=function(t){if(!this._localStyle){var e="localstyle"+(new Date).getTime()+"_"+guid();this._localStyle=css().css("width","auto"),this._localStyle.writeRule(e),this.addClass(e)}return this._localStyle},t.styleString=function(t){return this._dom.style.cssText=t,this},t.transform=function(t,e){this._transforms||(this._transforms=[]);{if("undefined"!=typeof e){if(-1==this._transforms.indexOf(t))this._transforms.push(t),this._transforms.push("("+e+")"),this._transforms.push(" ");else{var n=this._transforms.indexOf(t);this._transforms[n+1]="("+e+")"}var i=this._transforms.join("");return this.applyTransforms(i),this}if(this._transforms.indexOf(t)>=0){var n=this._transforms.indexOf(t),r=this._transforms[n+1],s=r.substr(1,r.length-2);return s}}},t.transformOrigin=function(t){var e=this._dom;return e.style["transform-origin"]=t,e.style["-webkit-transform-origin"]=t,e.style["-moz-transform-origin"]=t,e.style["-ms-transform-origin"]=t,this.trigger("transform-origin"),this},t.transformString=function(){return this._transforms?this._transforms.join(""):""},t.updateTransFromMatrix=function(t){if(this._transformMatrix){if(this._use3D){var e=t.getCSSMatrix3D();return this.attr("style",e),this}var n=t.get2DTransform(),i=this._dom;i.style.transform=n,i.style["-webkit-transform"]=n,i.style["-moz-transform"]=n,i.style["-ms-transform"]=n,n="0px 0px",i.style["transform-origin"]=n,i.style["-webkit-transform-origin"]=n,i.style["-moz-transform-origin"]=n,i.style["-ms-transform-origin"]=n,this.trigger("transform")}return this}}(this),function(t){t.addRow=function(t){if(this._contentObj)return this._contentObj.addRow.apply(this._contentObj,Array.prototype.slice.call(arguments));var e=new _e("tr");this.addItem(e),e.addClass("row"+this._children.length),"[object Array]"!==Object.prototype.toString.call(t)&&(t=Array.prototype.slice.call(arguments,0));var n=0,i=this;return t.forEach(function(t){var r=new _e("td");r._dom.setAttribute("valign","top"),i.isObject(t)?r.add(t):r.text(t),e.addItem(r),r.addClass("col"+n),n++}),this}}(this),function(t){t.child=function(t){return this._contentObj?this._contentObj.child.apply(this._contentObj,Array.prototype.slice.call(arguments)):this._children[t]?this._children[t]:void 0},t.childCount=function(){return this._contentObj?this._contentObj.childCount.apply(this._contentObj,Array.prototype.slice.call(arguments)):this._children?this._children.length:0},t.domAttrIterator=function(t,e){if(t&&t.attributes)for(var n=0;n<t.attributes.length;n++){var i=t.attributes[n];i.specified&&e(i.name,i.value)}},t.domIterator=function(t,e,n){if(t){var i={textarea:!0},r=t.childNodes;if(r)for(var s=r.length,o=0;s>o;o++){var a=r[o];if("svg"==a.tagName&&(n="svg"),a){var c=e(a,n);if(c);else{var h=a instanceof HTMLElement;if(h){var u=a.tagName.toLowerCase();i[u]||this.domIterator(a,e,n)}}}}}},t.forChildren=function(t,e){return this._contentObj?this._contentObj.forChildren.apply(this._contentObj,Array.prototype.slice.call(arguments)):void(this._children&&this._children.forEach(function(n){t(n),e&&n.forChildren(t,e)}))},t.forEach=function(t){return this._contentObj?this._contentObj.forEach.apply(this._contentObj,Array.prototype.slice.call(arguments)):void(this._children&&this._children.forEach(function(e){t(e)}))},t.searchTree=function(t,e){if(this._contentObj)return this._contentObj.searchTree.apply(this._contentObj,Array.prototype.slice.call(arguments));e||(e=[]);var n;return(n=t(this))&&e.push(n),this._children&&this._children.forEach(function(n){n.searchTree(t,e)}),e}}(this),function(t){t.addClass=function(t){if(this._contentObj)return this._contentObj.addClass.apply(this._contentObj,Array.prototype.slice.call(arguments));if(this._svg)return this;if(!(this._dom instanceof SVGElement)){if(this._classes||(this._classes=[]),this.isStream(t)){var e=this,n="";return t.onValue(function(t){n&&t!=n&&e.removeClass(n),e.addClass(t),n=t}),this}if(!this.hasClass(t))return this._classes.push(t),this._svg||(this._dom.className=this._classes.join(" ")),this}},t.findPostFix=function(){if(this._myClass)return this._myClass;var t=this.parent();return t?t.findPostFix():""},t.hasClass=function(t){return this._contentObj?this._contentObj.hasClass.apply(this._contentObj,Array.prototype.slice.call(arguments)):this._classes&&this._classes.indexOf(t)>=0?!0:!1},t.removeClass=function(t){if(this._contentObj)return this._contentObj.removeClass.apply(this._contentObj,Array.prototype.slice.call(arguments));if(!this._classes)return this;for(var e;(e=this._classes.indexOf(t))>=0;)e>=0&&(this._classes.splice(e,1),this._dom.className=this._classes.join(" "));return this}}(this),function(t){var e,n,i,r;t._alwaysTouchclick=function(t){n=t},t.bacon=function(t,e){return Bacon.fromEvent(this._dom,t,e)},t.bindSysEvent=function(t,e,n){if(t=t.toLowerCase(),this._sys||(this._sys={}),this._sys[t])return!1;this._sys[t]=!0;var i=this;return this._dom.attachEvent?n?this._dom.attachEvent("on"+t,function(t){t=t||window.event,i._event=t,e(),n&&(t=window.event,t&&(t.cancelBubble=!0))}):this._dom.attachEvent("on"+t,e):n?this._dom.addEventListener(t,function(t){t=t||window.event,i._event=t,n&&(t&&t.stopPropagation?t.stopPropagation():(t=window.event,t.cancelBubble=!0)),e()}):this._dom.addEventListener(t,e),!0},t.delegate=function(t){this._delegates||(this._delegates=[]),this._delegates.push(t)},t.emitValue=function(t,e){return this._controller&&this._controller[t]?void this._controller[t](e):void(this._valueFn&&this._valueFn[t]?this._valueFn[t](e):this._parent&&this._parent.emitValue(t,e))},t.eventBinder=function(t,e,n,i){var r=this;t.attachEvent?t.attachEvent("on"+e,function(t){t=t||window.event,r._event=t,n(),i&&(t=window.event,t&&(t.cancelBubble=!0))}):t.addEventListener(e,function(t){t=t||window.event,r._event=t,i&&(t&&t.stopPropagation?t.stopPropagation():(t=window.event,t.cancelBubble=!0)),n()})},t.isHovering=function(){if(!this._hoverable){this._hovering=!1;var t=this;this.on("mouseenter",function(){t._hovering=!0}),this.on("mouseleave",function(){t._hovering=!1}),this._hoverable=!0}return this._hovering},t.namedListener=function(t,e){if("undefined"!=typeof e)return this._namedListeners||(this._namedListeners={}),this._namedListeners[t]=e,e._listenerName=t,this;if(this._namedListeners)return this._namedListeners[t]},t.on=function(t,e){if(this._contentObj)return this._contentObj.on.apply(this._contentObj,Array.prototype.slice.call(arguments));this._ev||(this._ev={}),this._ev[t]||(this._ev[t]=[]),this._ev[t].push(e);var s=this;if(e._unbindEvent=function(){s.removeListener(t,e)},"outclick"==t)return i||(i=!0,r=[],document.body&&document.body.addEventListener("click",function(){for(var t=0;t<r.length;t++){var e=r[t];e.isHovering()||e.trigger("outclick")}},!0)),r.indexOf(s)<0&&r.push(s),this.isHovering(),this;if("load"==t&&this._imgLoaded&&this.trigger("load"),"click"==t&&(this.bindSysEvent("click",function(){s.trigger("click")},!0),n&&this.touchclick()),"dblclick"==t&&this.bindSysEvent("dblclick",function(){s.trigger("dblclick")},!0),"mousedown"==t&&this.bindSysEvent("mousedown",function(){s.trigger("mousedown")}),"mouseup"==t&&this.bindSysEvent("mouseup",function(){s.trigger("mouseup")}),"checked"==t&&this.bindSysEvent("change",function(){"checkbox"==s._type?(s._checked=s._dom.checked?!0:!1,s.trigger("checked")):s._value=s._dom.value,s.trigger("value")}),"value"==t&&(this.bindSysEvent("change",function(){"checkbox"==s._type?(s._checked=s._dom.checked?!0:!1,s.trigger("checked")):s._value=s._dom.value,s.trigger("value")}),"input"==this._type||"textarea"==this._type)){var o="";this.bindSysEvent("keyup",function(){var t=!1;o!=s._dom.value&&(t=!0),s._value=s._dom.value,t&&s.trigger("value"),o=s._dom.value})}return"focus"==t&&this.bindSysEvent("focus",function(){s._value=s._dom.value,s.trigger("focus")}),"play"==t&&this.bindSysEvent("play",function(){s.trigger("play")}),"mousemove"==t&&this.bindSysEvent("mousemove",function(){s.trigger("mousemove")}),"blur"==t&&this.bindSysEvent("blur",function(){s._value=s._dom.value,s.trigger("blur")}),"mouseenter"==t&&(this._dom.attachEvent?(this.bindSysEvent("mouseenter",function(t){t=t||window.event,s._hover||(s._event=t,s._hover=!0,s.trigger("mouseenter"))}),this.bindSysEvent("mouseleave",function(t){t=t||window.event,s._hover&&(s._event=t,s._hover=!1,s.trigger("mouseleave"))})):(this.bindSysEvent("mouseover",function(t){t=t||window.event,s._hover||(s._hover=!0,s._event=t,s._parent&&(s._parent._hover||s._parent.trigger("mouseenter")),s.trigger("mouseenter"))}),this.bindSysEvent("mouseout",function(){if(s._hover){var t=!1;s.forChildren(function(e){e._hover&&(t=!0)}),t||(s._hover=!1,s.trigger("mouseleave"))}}))),this},t.onValue=function(t,e){this._valueFn||(this._valueFn={}),this._valueFn[t]=e},t.removeAllHandlers=function(){if(this._ev){for(var t in this._ev)if(this._ev.hasOwnProperty(t)){var e=this._ev[t],n=this;e.forEach(function(t){if(n._namedListeners){var e=t._listenerName;n._namedListeners[e]&&delete n._namedListeners[e]}t._unbindEvent&&t._unbindEvent()})}for(var t in this._namedListeners)if(this._namedListeners.hasOwnProperty(t)){var i=this._namedListeners[t];i._unbindEvent&&i._unbindEvent(),delete this._namedListeners[t]}if(r){var s=r.indexOf(this);s>=0&&r.splice(s,1)}}},t.removeListener=function(t,e){if(this._ev&&this._ev[t]){var n=this._ev[t].indexOf(e);n>=0&&this._ev[t].splice(n,1),0==this._ev[t].length&&delete this._ev[t]}},t.router=function(t,n){this._dom.addEventListener(t,function(t){var i=t.target;if(i){var r=i.getAttribute("data-routeid");if(r){var s=e[r];s&&n(s)}}})},t.setRoute=function(t,n){var i=this.guid();this._dom.setAttribute("data-routeid",i),e||(e={}),n&&this.forChildren(function(e){e.setRoute(t,n)}),e[i]=t},t.trigger=function(t,e,n){if(this._contentObj)return this._contentObj.trigger.apply(this._contentObj,Array.prototype.slice.call(arguments));if(this._delegates&&this._delegates.forEach(function(i){i&&i.trigger&&i.trigger(t,e,n)}),this._ev&&this._ev[t]){var i=this;return this._ev[t].forEach(function(t){t&&t.apply(i,[i,e,n])}),this}},t.uniqueListener=function(t,e){var n=this.namedListener(t);return n&&n._unbindEvent&&n._unbindEvent(),this.namedListener(t,e),e}}(this),function(t){t.bind=function(t,e,n){if(this._contentObj)return this._contentObj.bind.apply(this._contentObj,Array.prototype.slice.call(arguments));var i=this,r=this;if(this.isFunction(t[e])){{var s=t.get(e),i=this,o=function(n){t.set(e,n)},a=!1,r=this,c=!1,h=this.uniqueListener("bind:valueIn",function(t,e){if(!a){if(r.isFunction(n))return n.apply(r,[e,r,t]),void(s=e);"checkbox"==i._type?("string"==typeof e&&(e="true"==e),i.checked(e)):i.bindVal(e),s=e}}),u=this.uniqueListener("bind:valueOut",function(){a=!0,o("checkbox"==i._type?i.checked():c?parseFloat(i.val()):i.val()),a=!1});this.uniqueListener("bind:invalidIn",function(t,e){i.trigger("invalid",e)}),this.uniqueListener("bind:validIn",function(t,e){i.trigger("valid",e)})}return"checkbox"==i._type?(t.on(e,h),this.on("value",u)):(t.on(e,h),this.on("value",u)),r.isFunction(n)?n.apply(r,[s,r,t]):"checkbox"==i._type?i.checked(s):i.bindVal(s),this}var f=this.__singleton();f.bind(t,e,this);var i=this;return this.on("datachange",function(){"checkbox"==i._type?i.checked(t[e]?!0:!1):"undefined"!=typeof t[e]&&i.val(t[e])}),this.on("value",function(){t&&("checkbox"==i._type?i.checked()?t.set(e,!0):t.set(e,!1):t.set(e,i.val())),f.send(t,e,"datachange",i)}),t&&("checkbox"==i._type?i.checked(t[e]?!0:!1):t[e]&&i.val(t[e])),i},t.bindVal=function(t){return"undefined"!=typeof this._dom.value||"option"==this._type?this._dom.value=t:(this._dom.style.whiteSpace="pre-wrap",this._dom.textContent=t),this._value=t,this},t.blur=function(){return this._contentObj?this._contentObj.blur.apply(this._contentObj,Array.prototype.slice.call(arguments)):void(this._dom.blur&&this._dom.blur())},t.checked=function(t){if(this._contentObj)return this._contentObj.checked.apply(this._contentObj,Array.prototype.slice.call(arguments));if("undefined"==typeof t)return this._checked=this._dom.checked,this._checked;var e=this._dom.checked;return this._dom.checked=t,(e&&!t||!e&&t)&&this.trigger("value",e),this},t.clearOptions=function(){if(this._dataList){var t=this._dataList._dom;t.parentNode&&t.parentNode.removeChild(t),this._options={},this._dataList=null}},t.focus=function(){return this._contentObj?this._contentObj.focus():void(this._dom.focus&&this._dom.focus())},t.getClipboard=function(t){return clipBoard(t)},t.localStore=function(t){var e=clipBoard(t),n=e.fromClipboard();n&&this.val(n);var i=this;return this.on("value",function(){e.toClipboard(i.val())}),this},t.options=function(t){if("input"==this._tag){if(this._dataList){var e=this._dataList._dom;e.parentNode&&e.parentNode.removeChild(e),this._options={},this._dataList=null}if(!this._dataList){if(this._options={},this._dataList=_e("datalist"),this._dataListId=this.guid(),this._dataList.q.attr("id",this._dataListId),"[object Array]"===Object.prototype.toString.call(t)){var n=this;t.forEach(function(t){var e=_e("option");e.q.attr("value",t),e.text(t),n._options[t]=e,n._dataList.add(e)})}else for(var i in t)if(!this._options[i]&&t.hasOwnProperty(i)){var r=_e("option");r.q.attr("value",i),r.text(t[i]),this._options[i]=r,this._dataList.add(r)}this.q.attr("list",this._dataListId),document.body&&document.body.appendChild(this._dataList._dom)}}return this},t.toBacon=function(t){if(this._contentObj)return this._contentObj.toBacon.apply(this._contentObj,Array.prototype.slice.call(arguments));var e=this;return later().asap(function(){"undefined"!=typeof e.val()&&e.trigger("value")}),Bacon.fromBinder(function(n){return e.on("value",function(){n(t?t(e.val()):e.val())}),function(){}})},t.val=function(t){return this._contentObj?this._contentObj.val.apply(this._contentObj,Array.prototype.slice.call(arguments)):"undefined"==typeof t?(("select"==this._type||"input"==this._type||"textarea"==this._type)&&(this._value=this._dom.value),this._value):(("undefined"!=typeof this._dom.value||"option"==this._type)&&(this._dom.value=t),this._value=t,this.trigger("value",t),this)}}(this),function(t){t._addCustomTagFn=function(t){this.extendAll(t,function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),this.e.apply(this,e)})},t.a=function(t,e){var n=this.shortcutFor("a",t,e);return n},t.attr=function(t,e){if(this.isObject(t))for(var n in t)t.hasOwnProperty(n)&&this.attr(n,t[n]);else{var i=this;if("ref"==t){var r=i._findComp();if(r&&r._instanceVars){var s=r._instanceVars;s.refs||(s.refs={}),s.refs[e]=i}}if(i._compBaseData)if(this.isArray(e)){var o=e[0],a=e[1];
o.on(a,function(){later().add(function(){i._compBaseData.set(t,o.get(a))})}),i._compBaseData.set(t,o.get(a)),i._compBaseData.on(t,function(){o.set(a,i._compBaseData.get(t))})}else i._compBaseData.set(t,e);else"canvas"==this._tag&&("width"==t&&(this._canWidth=parseInt(e)),"height"==t&&(this._canHeight=parseInt(e))),this.q.attr(t,e)}return this},t.b=function(t,e){var n=this.shortcutFor("b",t,e);return n},t.button=function(t,e){var n=this.shortcutFor("button",t,e);return n},t.canvas=function(t,e){var n=this.shortcutFor("canvas",t,e);return n._canvas=!0,n},t.checkbox=function(t,e){var n=this.shortcutFor("checkbox",t,e);return n},t.clearCanvas=function(){var t=this.ctx(),e=this._dom;return t.clearRect(0,0,e.width,e.height),this},t.ctx=function(){return this._dom.getContext?this._dom.getContext("2d"):void 0},t.div=function(t,e){var n=this.shortcutFor("div",t,e);return n},t.e=function(){var t=Array.prototype.slice.call(arguments);if(this._contentObj)return this._contentObj.e.apply(this._contentObj,t);var e=this._constrArgs(t);if(!this._isStdElem(e.elemName)){var n=this._findCustomElem(e.elemName);if(n&&(n.init||n.render)){var i=_e(n.customTag,e.attrs,e.constr,e.data);return this.add(i),i}}var r=this.shortcutFor.apply(this,t);return r},t.form=function(t,e){var n=this.shortcutFor("form",t,e);return n},t.getPixelFn=function(t){var e=this.ctx();t&&t._dom?(e=t.ctx(),t=e.getImageData(0,0,t._canWidth,t._canWidth)):t||(t=e.getImageData(0,0,this._canWidth,this._canWidth));var n=t.data;return function(e,i){var r=4*(e+i*t.width);return{x:e,y:i,r:n[r+0],g:n[r+1],b:n[r+2],a:n[r+3]}}},t.h1=function(t,e){var n=this.shortcutFor("h1",t,e);return n},t.h2=function(t,e){var n=this.shortcutFor("h2",t,e);return n},t.h3=function(t,e){var n=this.shortcutFor("h3",t,e);return n},t.h4=function(t,e){var n=this.shortcutFor("h4",t,e);return n},t.img=function(t,e){var n=this.shortcutFor("img",t,e);return n},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){}),t.input=function(t,e){var n=this.shortcutFor("input",t,e);return n},t.label=function(t,e){var n=this.shortcutFor("label",t,e);return n},t.li=function(t,e){var n=this.shortcutFor("li",t,e);return n},t.ol=function(t,e){var n=this.shortcutFor("ol",t,e);return n},t.p=function(t,e){var n=this.shortcutFor("p",t,e);return n},t.pre=function(t,e){var n=this.shortcutFor("pre",t,e);return n},t.processPixels=function(t,e,n){var i=this.ctx();e||(e=i.getImageData(0,0,this._canWidth,this._canHeight));for(var r=e.data,s=0,o=0;o<this._canHeight;o++)for(var a=0;a<this._canWidth;a++){var c=r[s],h=r[s+1],u=r[s+2],f=r[s+3],l={x:a,y:o,r:c,g:h,b:u,a:f};t(l),l.r!=c&&(r[s]=l.r),l.g!=h&&(r[s+1]=l.g),l.b!=u&&(r[s+2]=l.b),l.a!=f&&(r[s+3]=l.a),s+=4}return n||(console.log(this._canWidth,this._canHeight),i.putImageData(e,0,0,0,0,this._canWidth,this._canHeight)),e},t.row=function(){var t=Array.prototype.slice.call(arguments);if("table"==this._tag)return this.addRow(t),this;var e=this.table();return e.addRow(t),e},t.shortcutFor=function(t){if(this._contentObj)return this._contentObj.shortcutFor.apply(this._contentObj,Array.prototype.slice.call(arguments));var e=_e(t);this.add(e);var n=this._constrArgs(Array.prototype.slice.call(arguments));if(n.classStr&&e.addClass(n.classStr),n.stream&&e.addClass(n.stream),n.attrs){var i=n.attrs;for(var r in i)i.hasOwnProperty(r)&&("input"==t&&"type"==r&&"checkbox"==i[r]&&(e._type="checkbox"),e.attr(r,i[r]))}return n.constr&&n.constr.apply(e,[e]),e},t.span=function(t,e){var n=this.shortcutFor("span",t,e);return n},t.src=function(t){if("img"==this._tag&&!this._hasLoadL){var e=this;e._imgLoaded=!1,this.__singleton().addEventListener(this._dom,"load",function(){e.trigger("load"),e._imgLoaded=!0}),this._hasLoadL=!0}if("canvas"==this._tag){var n=_e("img"),e=this;return e._imgLoaded=!1,n.src(t),n.on("load",function(){var t=n._dom;e._canWidth||(e.q.attr("width",t.width),e.q.attr("height",t.height),e._canWidth=t.width,e._canHeight=t.height);var i=e._dom.getContext("2d");i.drawImage(t,0,0,t.width,t.height,0,0,e._canWidth,e._canHeight),e.trigger("load"),e._imgLoaded=!0}),this}return this.q.attr("src",t),this},t.strong=function(t,e){var n=this.shortcutFor("strong",t,e);return n},t.table=function(t,e){var n=this.shortcutFor("table",t,e);return n},t.textarea=function(t,e){var n=this.shortcutFor("textarea",t,e);return n},t.toDataURL=function(t,e){return e||(e=1),this._dom.toDataURL(t||"image/png",e)},t.ul=function(t,e){var n=this.shortcutFor("ul",t,e);return n},t.video=function(t,e){var n=this.shortcutFor("video",t,e);return n}}(this),function(t){t._setDomText=function(t,e){if("undefined"!=typeof t.textContent)t.textContent=e;else{var n=e,i=document.createElement("div");i.innerHTML=n;var r=i.innerText||"";t.innerHTML=r}},t.html=function(t){if(this._contentObj)return this._contentObj.html.apply(this._contentObj,Array.prototype.slice.call(arguments));if(this.isStream(t)){var e=this;return t.onValue(function(t){e.clear(),e.add(t)}),this}if(this.isFunction(t)){var n=t(),i=t(null,!0),e=this;return i.me.on(i.name,e.uniqueListener("text:value",function(t,n){e._dom.innerHTML=n})),this._dom.innerHTML=n,this}return"undefined"==typeof t?this._dom.innerHTML:(this._dom.innerHTML=t,this)},t.text=function(t){if(this._contentObj)return this._contentObj.text.apply(this._contentObj,Array.prototype.slice.call(arguments));if("undefined"==typeof t)return this._html;var e=Array.prototype.slice.call(arguments);if(e.length>1){var n=!1,i=this;if(e.forEach(function(t){i.isObject(t)&&!i.isStream(t)&&(n=!0)}),n)return this.clear(),this.add(e),this;t=this.str(e)}if(this.isObject(t)&&t.onValue){var i=this;return t.onValue(function(t){if(i._svgElem||"undefined"!=typeof i._dom.textContent)i._dom.textContent=t;else{var e=t,n=document.createElement("div");n.innerHTML=e;var r=n.textContent||n.innerText||"";i._dom.innerHTML=r}i._html=t}),this}if(this.isFunction(t)){var r=t(),s=t(null,!0),i=this,o=(later(),!1);if("tspan"==i._tag&&(o=!0),this._svgElem||"undefined"!=typeof i._dom.textContent?s.me.on(s.name,i.uniqueListener("text:value",function(t,e){o&&(e=e.trim()),i._dom.textContent=!o||e&&0!=e.length?e:" "})):s.me.on(s.name,i.uniqueListener("text:value",function(t,e){var n=e,r=document.createElement("div");r.innerHTML=n;var s=r.textContent||r.innerText||"";i._dom.innerHTML=s})),this._svgElem||"undefined"!=typeof this._dom.textContent)o&&(r=r.trim()),!o||r&&0!=r.length?this._dom.textContent=r:(this._dom.textContent="",i._dom.textContent=" ");else{var a=document.createElement("div");a.innerHTML=r;var c=a.textContent||a.innerText||"";this._dom.innerHTML=c}return this}if(this._svgElem||"undefined"!=typeof this._dom.textContent)this._dom.textContent=t;else{var h=t,a=document.createElement("div");a.innerHTML=h;var c=a.textContent||a.innerText||"";this._dom.innerHTML=c}return this._html=t,this}}(this),function(t){var e,n,i,r,s,o,a,c,h,u,f,l,d;t._refreshView=function(t){if(t||(t=this),t._refeshView){var e=t.getRole(),n=t._refeshView.view;if(n){d||(d={});{var i,r,s,o=t._refeshView.factoryName,a=t._refeshView.paramName;t._refreshView.activeLayout}if(a||(a=""),this.isObject(o))i=o,s=e+"."+o+"."+a;else if(r=this.findViewFactory(o,e),r&&!r._viewCache&&(r._viewCache={}),s=e+"."+o+"."+a,r)if(r._viewCache[s])i=r._viewCache[s];else{var c=r;c&&(i=c(a),i&&(r._viewCache[s]=i))}i&&(t.replaceWith(i),i.componentDidMount&&i.componentDidMount(),i.trigger("mount"),i._refeshView=t._refeshView,r&&r._dynamic&&!r._binded&&(r._binded=!0,r._dynamic.on("body",function(t,e){try{var n=new Function(e),c=n(a);c&&(i.replaceWith(c),i=c,r._container._viewFactory[o]=n,n&&!n._viewCache&&(n._viewCache={}),n._viewCache[s]=c)}catch(h){}})))}}},t.contentRouter=function(t,e){f||(f={}),this.isFunction(t)?f["default"]=t:f[t]=e},t.createLayout=function(t,e){u||(u={});var n,i=_e();n=this.isFunction(e)?e():e,u[t]={view:n,viewHolder:i}},t.factoryLoader=function(t){var e=this;return t.then(function(){t.forTree(function(t){if("function"==t.get("type")){var n=new Function(t.get("body"));n._dynamic=t,e.viewFactory(t.get("name"),n)}})})},t.fiddle=function(t){if(this._contentObj)return this._contentObj.fiddle.apply(this._contentObj,Array.prototype.slice.call(arguments));var e=_e("iframe"),n=this.guid(),i=decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chead%3E");if(t.scripts&&t.scripts.forEach(function(t){i+=decodeURIComponent("%3Cscript%20src%3D'")+t+decodeURIComponent("'%3E%3C%2Fscript%3E")}),t.stylesheets&&t.stylesheets.forEach(function(t){i+='<link rel="stylesheet" href="'+t+'"></link>'}),t.head&&(i+=t.head),i+="</head><body>",t.callBackName||(t.callBackName="fiddleDone"),t.onReady&&t.callBackName){var r=window.localStorage,s=function(){var e;(e=r.getItem(n))&&(later().removeFrameFn(s),t.onReady(JSON.parse(e)))};later().onFrame(s),i+=decodeURIComponent("%3Cscript%3E")+"function "+t.callBackName+"(v){window['localStorage'].setItem('"+n+"', JSON.stringify(v));}",i+=decodeURIComponent("%3C%2Fscript%3E")}return t.html&&(i+=t.html),t.jsCode&&(i+=decodeURIComponent("%3Cscript%3E")+t.jsCode+decodeURIComponent("%3C%2Fscript%3E")),i+="</body></html>",this.addItem(e),e._dom.contentWindow.document.open(),e._dom.contentWindow.document.write(i),e._dom.contentWindow.document.close(),e.width(t.width||800).height(t.height||600),this},t.findViewByName=function(t,e){if(e.hasClass(t))return e;for(var n,i=0;n=e.child(i++);)if(n.hasClass(t))return n;for(i=0;n=e.child(i++);){var r=n.findViewByName(t,n);if(r)return r}},t.findViewFactory=function(t,e){if(e||(e=this.getRole(),e||(e="default")),this._viewFactory&&this._viewFactory[e]){var n=this._viewFactory[e][t];if(n)return n}var i=this.parent();return i?i.findViewFactory(t,e):l[e]?l[e][t]:null},t.getLayouts=function(){return u},t.getRole=function(){if(this._role)return this._role;var t=this.parent();return t?t.getRole():void 0},t.getRouteObj=function(){var t=document.location.hash.split("/"),e=function(t){for(var e={},n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e};return{hash:document.location.hash,parts:t.slice(),controller:t.shift().substring(1),action:t.shift(),params:e(t),rest:t}},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){if(!n){var t=this;this.eventBinder(window,"hashchange",function(){"#"+n.lastSetValue!=document.location.hash&&(n.pushing||n.routers.forEach(function(e){e(t.getRouteObj())}))}),n={inited:!0,routers:[]},a={},h=[],c=[],this.onRoute(function(t){h.forEach(function(e){var n=e._pageController,i=n[t.controller]||n["default"];if(i){var r=i.ctrl[t.action]||i.ctrl["default"];r&&r.apply(i.canvas,[t.params,i.canvas,t])}})})}}),t.initScreenEvents=function(){i={w:0,h:0};var t=[700],e=0;if(r=[],window.matchMedia)s=window.matchMedia("(max-width:700px)"),s.addListener(function(t){e++,r.forEach(t.matches?function(t){t({w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight,limit:700,width_less:!0,eCnt:e})}:function(t){t({w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight,limit:700,width_more:!0,eCnt:e})})});else{var n=(document.addEventListener?!1:!0,window);this.eventBinder(n,"resize",function(){e++;var n=window.innerWidth||document.documentElement.clientWidth,s=!1,o=700;t.forEach(function(t){var e=(t-n)*(t-i.w);0>e&&(o=t,s=!0)}),i.w=window.innerWidth||document.documentElement.clientWidth,i.h=window.innerHeight||document.documentElement.clientHeight,s&&r.forEach(function(t){var n={limit:o,w:i.w,h:i.h,eCnt:e};i.w>o?n.width_more=!0:n.width_less=!0,t(n)})})}},t.layout=function(t,e){if(this._contentObj)return this._contentObj.layout.apply(this._contentObj,Array.prototype.slice.call(arguments));e||(e=t,t=this.guid());var n=e.split("|"),i=_e();return n.forEach(function(t){var e=i.div();t.split(",").forEach(function(t){t=t.trim();var n=t.split(" "),i=n[0],r=e.div(i);if(r._dom.style.display="inline-block",r._dom.style.verticalAlign="top",n.length>1){n.shift();var s=n.join("");r.width(s)}})}),this.createLayout(t,i),this.setLayout(t),this},t.onMediaChange=function(t){r.push(t)},t.onRoute=function(t){n.routers.push(t);var e=this;later().add(function(){t(e.getRouteObj())})},t.pageController=function(t,e){this._pageController||(this._pageController={}),this._pageController[t]={ctrl:e,canvas:this},h.indexOf(this)<0&&h.push(this)},t.popView=function(){if(this._contentObj)return this._contentObj.popView.apply(this._contentObj,Array.prototype.slice.call(arguments));if(!this._views||0==this._views.length){var t=this.parent(!0);return t?(t.popView(),this):(this._views=[],this)}var e=(new Date).getTime();if(!(o&&1e3>e-o)){o=e;var n=this,i=this._views.pop(),r=!0,s=this;this._poppedViews||(this._poppedViews=_e()),n.forChildren(function(t){t.removeClass("viewOut"),t.removeClass("viewIn"),t.addClass("viewOut"),r&&later().after(.2,function(){var t=[];i.oldChildren.forChildren(function(e){e.show(),t.push(e)}),t.forEach(function(t){n.add(t),t.removeClass("viewOut"),t.removeClass("viewIn"),t.addClass("viewIn")}),i.oldTitle&&s.setTitle&&s.setTitle(i.oldTitle),r=!1,later().after(.2,function(){o=0,t[0]&&t[0].scrollTo(i._y,i._x)})}),later().after(.2,function(){s._poppedViews.add(t)})})}},t.push=function(t,e){if(this._contentObj)return this._contentObj.push.apply(this._contentObj,Array.prototype.slice.call(arguments));var n=this.findViewFactory(e);if(n){var i;i=t.getID?t.getID():t;var r=n.apply(null,[i]);this.pushView(r)}return this},t.pushTo=function(t,e,n){if(this.isObject(n)){var i=n;n.model&&(i=n.model),i.getID&&(n=i.getID())}if(!this._activeLayout){var r=this.parent();return r&&r.pushTo(t,e,n),this}var s=this.getRole();s||(s="default");var o=this.findViewByName(t,this._activeLayout.view);if(o){d||(d={});var a,c,h;if(n||(n=""),this.isObject(e))a=e,h=s+"."+e+"."+n;else if(c=this.findViewFactory(e,s),c||(c=this.findViewFactory(e,"default")),c&&!c._viewCache&&(c._viewCache={}),h=s+"."+e+"."+n,c)if(c._viewCache[h])a=c._viewCache[h];else{var u=c;u&&(a=u(n),a&&(c._viewCache[h]=a))}a&&(this._activeLayout.parts||(this._activeLayout.parts={}),this._activeLayout.parts[t]=o,o.pushView(a),a.componentDidMount&&a.componentDidMount(),a.trigger("mount"),a._refeshView={name:t,factoryName:e,paramName:n,view:o,activeLayout:this._activeLayout},c&&c._dynamic&&!c._binded&&(c._binded=!0,c._dynamic.on("body",function(t,i){try{var r=new Function(i),s=r(n);s&&(a.replaceWith(s),a=s,c._container._viewFactory[e]=r,r&&!r._viewCache&&(r._viewCache={}),r._viewCache[h]=s)}catch(o){}})))}},t.pushView=function(t,i,r){if(this._contentObj)return this._contentObj.pushView.apply(this._contentObj,Array.prototype.slice.call(arguments));if(this._views||(this._views=[]),t!=this&&t!=e){var s=this;if(!s._children||s._children[0]!=t){this.isFunction(t)&&(t=t());var o=(new Date).getTime();if(!(this._transitionOn&&o-this._transitionOn<1e3)){this._transitionOn=o,i||(i=null);var a=r||_e(),c={parentView:null,oldTitle:this.__currentTitle,oldChildren:a,params:i};window&&(c._x=window.pageXOffset,c._y=window.pageYOffset);var h=!0,u=!1,f=this;return this.onValue("pushView",function(t){f.pushView(t)}),this.onValue("popView",function(t){f.popView(t)}),e=this,s.forChildren(function(e){u=!0,later().after(.3,function(){t.removeClass("viewOut"),t.removeClass("viewIn"),t.addClass("viewIn"),s.add(t),t.show(),h=!1,later().after(.2,function(){f._transitionOn=0,t.scrollTo()})}),e.removeClass("viewIn"),e.removeClass("viewOut"),e.addClass("viewOut"),later().after(.2,function(){a.add(e)})}),this._views.push(c),u||later().after(.3,function(){t.removeClass("viewIn"),t.removeClass("viewOut"),t.addClass("viewIn"),s.add(t),t.show(),later().after(.2,function(){f._transitionOn=0,t.scrollTo()})}),n.pushing=!1,this}}}},t.removeControllersFor=function(t){var e=h.indexOf(t);e>=0&&h.splice(e,1)},t.scrollTo=function(t,e){if(window){var n=e||window.pageXOffset,i=window.pageYOffset,r=window.innerHeight;if(t){var s=t,o=parseInt(s)-i;if(Math.abs(o)<200&&i+r-200>s&&s>i)return;return later().ease("pow",600,function(t){window.scrollTo(n||0,parseInt(i+o*t))}),this}var a=this.offset(),s=a.top-.3*r;0>s&&(s=0);var o=parseInt(s)-i;if(Math.abs(o)<200&&i+r-200>s&&s>i)return;later().ease("pow",600,function(t){window.scrollTo(n||0,parseInt(i+o*t))})}return this},t.setLayout=function(t){if(this._contentObj)return this._contentObj.setLayout.apply(this._contentObj,Array.prototype.slice.call(arguments));if(u&&u[t]){var e=u[t];if(this._activeLayout==e)return this;this._activeLayout=e,this._children.length=0,this._children[0]=e.view,e.view._parent=this,this._dom.firstChild&&this._dom.removeChild(this._dom.firstChild),this._dom.appendChild(e.view._dom)}},t.setRole=function(t){this._role&&this._role!=t?(this._role=t,this._refreshView(),this.forChildren(function(t){t._refreshView()},!0)):this._role=t},t.viewFactory=function(t,e,n){this.isFunction(e)&&(n=e,e=t,t="default"),l||(l={}),l[t]||(l[t]={}),this._viewFactory||(this._viewFactory={}),this._viewFactory[t]||(this._viewFactory[t]={});var i=this;this._viewFactory[t][e]=function(t){return n(i.isObject(t)?t.getID():t)},l[t][e]=function(t){return n(i.isObject(t)?t.getID():t)},n._container=this}}(this),function(t){t._findSendHandler=function(t){if(this._sendHook){var e=this._sendHook[t];if(e)return e;var e=this._sendHook["*"];if(e)return e}var n=this._parent;if(n){var i=n._findSendHandler(t);if(i)return i}var r=this._contentParent;if(r){var i=r._findSendHandler(t);return i}},t.clickTo=function(t,e){var n=e;return this.isObject(n)&&n.getID&&(n=n.getID()),this.on("click",function(){this.send(t,n)}),this},t.createItemView=function(t){var e,n=this.getViewFunction(t),i=this;if(n&&(e=n(t),t.viewClass&&this.isFunction(t.viewClass))){var r=t.viewClass(null,!0),s=t.viewClass(),o=function(n,a){if(s!=a){var c=i.createItemView(t);s=a,e.replaceWith(c),e=c,r.me.removeListener(r.name,o)}};r.me.on(r.name,o)}return e},t.data=function(t){return"undefined"!=typeof t?(this.__mdata=t,this):this.__mdata},t.findModelFactory=function(t){if(this._modelFactory){var e=this._modelFactory[t];if(e)return e}var n=this.parent();return n?n.findModelFactory(t):null},t.forwardData=function(t,e,n){var i=e.split(","),r=this;i.forEach(function(e){e=e.trim();var i=e,s=e.split("=>");s.length>1&&(e=s[0].trim(),i=s[1].trim()),t.on(e,function(t,s){try{n&&(s=n.apply(r,[e,s])),"undefined"!=typeof s&&r[i]&&r[i](s)}catch(o){console.error(o.message)}});var o=t.get(e);n&&(o=n.apply(r,[e,o])),"undefined"!=typeof o&&r[i]&&r[i](o)})},t.fromStream=function(t,e){var n=this;t.onValue(function(t){var i=e(t);later().add(function(){n.clear(),n.add(i)})})},t.getViewFunction=function(t){if(this.isFunction(this._view))return this._view;if(t.viewClass){var e;if(e=this._view[t.viewClass()])return e}for(var n in this._view)if(this._view.hasOwnProperty(n)){var e=this._view[n];if(this.isFunction(e))return e}},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){}),t.model=function(t,e){if(!t)return this.state();var n=this;return _promise(function(i,r){var s=function(){var s=n.findModelFactory(t);if(s){s._obj||(s._obj={});var o=s._autoCache,a=e||"undefined";try{if(o&&s._obj._autoCache){var c=s._obj._autoCache[a];if(c)return void i({model:c})}s.apply(s._obj,[e,function(t){o&&(s._obj._autoCache||(s._obj._autoCache={}),s._obj._autoCache[a]=t),i({model:t})},r])}catch(h){r(h)}}else r({reason:"not found"})};n.parent()?s():n.on("parent",s)})},t.modelFactory=function(t,e,n){this._modelFactory||(this._modelFactory={}),this._modelFactory[t]=e,e._container=this,e._autoCache=n},t.modelFactoryLoader=function(t){var e=this;return t.then(function(){t.forTree(function(t){if("function"==t.get("type")){var n=new Function(t.get("body"));n._dynamic=t,e.modelFactory(t.get("name"),n)}})})},t.mv=function(t,e,n){if(this._contentObj)return this._contentObj.mv.apply(this._contentObj,Array.prototype.slice.call(arguments));var i,r="div";if(this.isFunction(e))i=e;else if(this.isFunction(n))r=e,i=n;else if("string"==typeof e){if(i=this.findViewFactory(e)){var s=i.apply(null,[t]);this.add(s)}return this}i&&this.mvc(t,function(t){var e=_e(r);return i.apply(e,[t]),e})},t.mvc=function(t,e,n){if(this._contentObj)return this._contentObj.mvc.apply(this._contentObj,Array.prototype.slice.call(arguments));var i=this;return e&&(this._view=e),t&&(this._model=t,this._model.on&&(this._model.on("insert",function(t,e){var n=i._model.item(e),r=i.createItemView(n);r&&i.insertAt(e,r)}),this._model.on("move",function(t,e){var n=i.child(e.from),r=i.child(e.to);r&&n&&(e.to<e.from?r.insertBefore(n):r.insertAfter(n))}),this._model.on("remove",function(t,e){var n=i.child(e);n&&n.remove()}),this._model.on("sort",function(t,e){if(0!=e.length&&!i.isObject(e[0][1])){for(var n=new Array,r=0;r<e.length;r++)e[r][1]!=e[r][2]?(n[r]=new Array(3),n[r][1]=i.child(e[r][1]),n[r][2]=i.child(e[r][2])):e[r][0]=null;for(var r=0;r<n.length;r++){var s=n[r][1],o=n[r][2],a=e[r][0];"a"==a&&o.insertBefore(s),"b"==a&&o.insertAfter(s)}}})),this._model.forEach&&this._model.forEach(function(t){var e=i.createItemView(t);e&&i.add(e)})),n&&(this._controller=n),this},t.onMsg=function(t,e,n){this._sendHook||(this._sendHook={}),this._sendHook[t]||(this._sendHook[t]=[]),n&&(e._context=n),this._sendHook[t].unshift(e)},t.send=function(t,e,n,i){var r=this;later().add(function(){var s=r._findSendHandler(t);if(s)for(var o=0;o<s.length;o++){var a=s[o],c=a.apply(a._context||r,[e,n,i,t]);if(c===!0)return}else i?i("Controller or send handler for "+t+" was not found"):console.error("controller for message "+t+" was not found")})},t.sendHandler=function(t,e,n){return this.onMsg(t,e,n)},t.sendMsg=function(t,e,n,i){return this.send(t,e,n,i)},t.tree=function(t,e,n){if(this._contentObj)return this._contentObj.tree.apply(this._contentObj,Array.prototype.slice.call(arguments));var i,r={};n=n||{};var s=function(t,o){var a,c,h=[],u={subTree:function(t,e){h.push([t,e])},drag:function(t){a=t}};return c=e.apply(u,[t,o]),c.on("click",function(){r.lastActive=t}),c.on("mouseenter",function(){a&&(i&&!r.dropTarget?(c.addClass("draggedOn"),r.dropTarget=t,r.dropElem=c):c.addClass("mouseOn"))}),c.on("mouseleave",function(){c.removeClass("mouseOn"),c.removeClass("draggedOn"),r.dropTarget=null}),a&&a.drag(function(e){if(a&&(e.start&&!r.item&&(i=!0,r.item=t,r.srcElem=c),e.end)){if(i=!1,r.dropTarget&&r.item)if(r.dropTarget.parent()==r.item.parent()){if(r.dropTarget!=r.item){var n=r.dropTarget.indexOf();r.item.moveToIndex(n)}}else r.dropTarget.items&&(r.item.remove(),r.dropTarget.items.push(r.item));r.item=null,r.dropTarget=null}}),h.forEach(function(e){var i=e.pop(),r=e.pop();if(r&&i){var a=i;r.length()>0&&c.addClass("hasChildren"),i.on("insert",function(){c.addClass("hasChildren")}),i.on("remove",function(){0==t.items.length()&&c.removeClass("hasChildren")}),n.clickToOpen&&a.hide(),i.mvc(r,function(t){return s(t,o+1)});var h=t.get("open");n.clickToOpen&&t.on("open",function(t,e){e?a.show():a.hide()}),c.on("click",function(){n.clickToOpen&&(h=!h,t.set("open",h))}),h&&a.show()}}),c};this.mvc(t,function(t){return s(t,1)})}}(this),function(t){t.circle=function(t,e){var n=this.shortcutFor("circle",t,e);return n},t.defs=function(t,e){var n=this.shortcutFor("defs",t,e);return n},t.feGaussianBlur=function(t,e){var n=this.shortcutFor("feGaussianBlur",t,e);return n},t.feMerge=function(t,e){var n=this.shortcutFor("feMerge",t,e);return n},t.feMergeNode=function(t,e){var n=this.shortcutFor("feMergeNode",t,e);return n},t.feOffset=function(t,e){var n=this.shortcutFor("feOffset",t,e);return n},t.filter=function(t,e){var n=this.shortcutFor("filter",t,e);return n},t.g=function(t,e){var n=this.shortcutFor("g",t,e);return n},t.image=function(t,e){var n=this.shortcutFor("image",t,e);return n},t.line=function(t,e){var n=this.shortcutFor("line",t,e);return n},t.path=function(t,e){var n=this.shortcutFor("path",t,e);return n},t.rect=function(t,e){var n=this.shortcutFor("rect",t,e);return n},t.svg=function(t,e){var n=this.shortcutFor("svg",t,e);return n},t.svg_text=function(t,e){var n=this.shortcutFor("text",t,e);return n},t.tspan=function(t,e){var n=this.shortcutFor("tspan",t,e);return n}}(this),function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return t===Object(t)},t.isStream=function(t){return this.isObject(t)&&t.onValue&&t.bufferWithTime?!0:!1},t.str=function(t){var e;e=this.isArray(t)?t:Array.prototype.slice.call(arguments);var n=!1,i=this,r=[];return e.forEach(function(t){i.isStream(t)?(n=!0,r.push("")):r.push(t)}),n?Bacon.fromBinder(function(t){return e.forEach(function(e,n){i.isStream(e)&&e.onValue(function(e){r[n]=e,t(r.join(""))})}),later().add(function(){t(r.join(""))}),function(){}}):e.join("")},t.whenLoaded=function(t,e){var n=t.length;t.forEach(function(i){i.on("load",function(){n--,0==n&&e(t)})}),0==t.length&&e([])}}(this),function(t){var e;t.colorMix=function(t,e,n){var i=this.toRGB(t),r=this.toRGB(e),s=this.yuvConversion2(i,r,function(t,e){return{y:(1-n)*t.y+n*e.y,u:(1-n)*t.u+n*e.u,v:(1-n)*t.v+n*e.v}});return s},t.colorToHex=function(t){if("#"===t.substr(0,1))return t;var e=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(t),n=parseInt(e[2]),i=parseInt(e[3]),r=parseInt(e[4]),s=r|i<<8|n<<16;return e[1]+"#"+s.toString(16)},t.colourNameToHex=function(t){return"undefined"!=typeof e[t.toLowerCase()]?e[t.toLowerCase()]:!1},t.componentToHex=function(t){t=parseInt(t);var e=t.toString(16);return 1==e.length?"0"+e:e},t.dim=function(t,e){return this.yuvConversion(t,function(t){return t.y=t.y-e,t})},t.hexToRgb=function(t){if("#"==t[0]&&(t=t.substr(1)),3==t.length){var e=t;t="",e=/^([a-f0-9])([a-f0-9])([a-f0-9])$/i.exec(e).slice(1);for(var n=0;3>n;n++)t+=e[n]+e[n]}if(!t)return null;if(null!=t){var i=/^([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i.exec(t).slice(1);return{r:parseInt(i[0],16),g:parseInt(i[1],16),b:parseInt(i[2],16)}}},t.hexToYuv=function(t){var e=this;return e.rgbToYuv(e.toRGB(t))},t.hsvToRgb=function(t){var e,n,i,r,s,o,a,c,h=Math.max(0,Math.min(360,t.h)),u=Math.max(0,Math.min(100,t.s)),f=Math.max(0,Math.min(100,t.v));if(u/=100,f/=100,0==u)return e=n=i=f,{r:Math.round(255*e),g:Math.round(255*n),b:Math.round(255*i)};switch(h/=60,r=Math.floor(h),s=h-r,o=f*(1-u),a=f*(1-u*s),c=f*(1-u*(1-s)),r){case 0:e=f,n=c,i=o;break;case 1:e=a,n=f,i=o;break;case 2:e=o,n=f,i=c;break;case 3:e=o,n=a,i=f;break;case 4:e=c,n=o,i=f;break;default:e=f,n=o,i=a}return{r:Math.round(255*e),g:Math.round(255*n),b:Math.round(255*i)}},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){e||(e={none:"#ffffff",aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"})}),t.mix=function(t,e,n){return"undefined"==typeof n&&(n=.5),this.yuvConversion2(t,e,function(t,e){return{y:(1-n)*t.y+n*e.y,u:(1-n)*t.u+n*e.u,v:(1-n)*t.v+n*e.v}})},t.rgbToHex=function(t){var e=this;return"#"+e.componentToHex(t.r)+e.componentToHex(t.g)+e.componentToHex(t.b)},t.rgbToHsv=function(t){var e,n,i,r,s,o=t.r/255,a=t.g/255,c=t.b/255,h=Math.max(o,a,c),u=h-Math.min(o,a,c),f=function(t){return(h-t)/6/u+.5};return 0==u?r=s=0:(s=u/h,e=f(o),n=f(a),i=f(c),o===h?r=i-n:a===h?r=1/3+e-i:c===h&&(r=2/3+n-e),0>r?r+=1:r>1&&(r-=1)),{h:Math.round(360*r),s:Math.round(100*s),v:Math.round(100*h)}},t.rgbToYuv=function(t){var e=t.r/255,n=t.g/255,i=t.b/255;return{y:.299*e+.587*n+.114*i,u:-.14713*e-.28885*n+.436*i,v:.615*e-.51499*n-.10001*i}},t.toRGB=function(t){if("object"==typeof t)return t;var e=this,n=e.colourNameToHex(t);return n||(n=e.colorToHex(t)),e.hexToRgb(n)},t.toRSpace=function(t){return Math.max(0,Math.min(255,Math.round(t)))},t.yuvConversion=function(t,e){var n=this,i=n.rgbToYuv(n.toRGB(t));i=e(i);var r=n.yuvToRgb(i);return n.rgbToHex(r)},t.yuvConversion2=function(t,e,n){var i=this,r=i.rgbToYuv(i.toRGB(t)),s=i.rgbToYuv(i.toRGB(e));r=n(r,s);var o=i.yuvToRgb(r);return i.rgbToHex(o)},t.yuvPixelConversion=function(t,e){var n=me.rgbToYuv(t);n=e(n);var i=me.yuvToRgb(n);return t.r=i.r,t.g=i.g,t.b=i.b,t},t.yuvToRgb=function(t){var e=t.y,n=t.u,i=t.v;return{r:this.toRSpace(255*(e+0*n+1.13983*i)),g:this.toRSpace(255*(e-.39465*n-.5806*i)),b:this.toRSpace(255*(e+2.03211*n))}}}(this),function(t){var e,n,i;t._httpsend=function(t,e,n,i,r){var s=this._initAjax();return s.open(n,t),s.onreadystatechange=function(){4==s.readyState&&(200==s.status?e(s.responseText):r(s))},"POST"==n&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(i),this},t._initAjax=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var t,e=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],n=0;n<e.length;n++)try{t=new ActiveXObject(e[n]);break}catch(i){}return t},t._traditionalUpload=function(t){var e=_e(),i=e.form("",{action:t.url,enctype:"multipart/form-data",method:"POST",name:e.guid()}),r=t.maxCnt||1,s="complete"+this.guid(),o=[],a=function(e){if(delete window[s],t.progress){var n={loadPros:100,ready:!0};
t.progress(n)}t.done&&t.done(e)};if(window[s]=a,i.input("",{type:"hidden",value:s,name:"onComplete"}),t.vars)for(var c in t.vars)t.vars.hasOwnProperty(c)&&i.input("",{type:"hidden",value:t.vars[c],name:c});var h=i.div("form-group"),u=t.maxFileCnt||5,f=0,l=!1,d=1,_=function(){if(!(f>=u)){var n=h.input("",{type:"file",name:t.fieldName||"newFile"+d++,size:50});n.on("value",function(){t.autoupload?e.uploadFiles():r>f&&_()}),f++}};_();var p=_e("iframe"),m=e.guid();p.q.attr("id",m),p.q.attr("name",m),p.absolute().x(-4e3).y(-4e3);var v=0;return p._dom.addEventListener("load",function(){if(l=!1,v++,1!=v&&(o.forEach(function(t){t.remove()}),t.done)){var e=p._dom,n=e.contentDocument?e.contentDocument:e.contentWindow.document;if(t.progress){var i={loadPros:100,ready:!0};t.progress(i)}if(t.done){var r=n.body.innerHTML;r&&t.done(r)}}}),e.add(p),e.uploadFiles=function(e){if(!l){l=!0;var r=n&&n[t.url];if(r){var s={traditional:!0,postData:{},files:[]};if(t.vars&&t.vars)for(var a in t.vars)t.vars.hasOwnProperty(a)&&(s.postData[a]=t.vars[a]);h.forEach(function(t){if(o.push(t),t._dom.files)for(var e=t._dom.files.length,n=0;e>n;n++){var i=t._dom.files[n];i&&s.files.push(i)}});try{var c=0,u=setInterval(function(){if(c+=Math.random()*(t.uploadSpeed||10),c>100&&(c=100),100==c){var e=r(s);t.done&&t.done(e),clearInterval(u)}t.progress&&t.progress({loadPros:parseInt(c),ready:100==parseInt(c)})},30)}catch(f){t.error&&t.error(f.message)}}else{if(e)for(var a in e)e.hasOwnProperty(a)&&i.input("",{type:"hidden",value:e[a],name:a});i._dom.target=m,i._dom.submit()}}},t.getUploader&&t.getUploader(e.uploadFiles),e.on("upload",function(t,e){t.uploadFiles(e||{})}),e},t.ajaxHook=function(t,n){e||(e={}),e[t]||(e[t]=[]),e[t].unshift(n)},t.appendToHead=function(t,e){if(!e){e=t;var n=e.split(".");t=n.pop()}var r=this.__promiseClass();return r?(i||(i={}),i[e]?i[e]:(i[e]=new r(function(n,i){var r;return"js"==t&&(r=document.createElement("script"),r.src=e),"css"==t&&(r=document.createElement("link"),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e)),r?(r.onload=function(){n(e)},r.onerror=function(){i(e)},void document.head.appendChild(r)):void i("Unknown element type "+e)}),i[e])):void 0},t.createUploader=function(t){if(t.testTraditional||"undefined"==typeof window.FormData)return this._traditionalUpload(t);var e=_e("input").addClass("uploader-field");e.q.attr("type","file"),e._uploadGUID="uploadField"+this.guid(),e.q.attr("id",e._uploadGUID),e.q.attr("name",e._uploadGUID),t.audio&&(e.q.attr("capture","microphone"),e.q.attr("accept","audio/*")),t.video&&(e.q.attr("capture","camcorder"),e.q.attr("accept","video/*")),t.images&&(e.q.attr("capture","camera"),e.q.attr("accept","image/*"));var i=function(e){var i=n&&n[t.url];if(i){var r={postData:{},files:[]};if(t.vars&&t.vars)for(var s in t.vars)t.vars.hasOwnProperty(s)&&(r.postData[s]=t.vars[s]);for(var o=e.files.length,a=0;o>a;a++){var c=e.files[a];c&&r.files.push(c)}try{var h=0,u=setInterval(function(){if(h+=Math.random()*(t.uploadSpeed||10),h>100&&(h=100),100==h){var e=i(r);t.done&&t.done(e),clearInterval(u)}t.progress&&t.progress({loadPros:parseInt(h),ready:100==parseInt(h)})},30)}catch(f){t.error&&t.error(f.message)}}else for(var o=e.files.length,a=0;o>a;a++){var c=e.files[a];if(c){var l=new window.FormData;if(t.vars&&t.vars)for(var s in t.vars)t.vars.hasOwnProperty(s)&&l.append(s,t.vars[s]);l.append(t.fieldName||"newFile",c);var d=new XMLHttpRequest;d.onreadystatechange=function(){4===d.readyState&&(200===d.status?t.done&&t.done(d.responseText):t.error&&t.error(d.responseText,d))},d.open("POST",t.url),t.progress&&d.upload&&(d.upload.onprogress=function(e){if(e.lengthComputable){var n=e.loaded/e.total*100,i={loadPros:n,ready:!1};e.loaded==e.total&&(i.ready=!0),t.progress(i)}}),d.send(l)}}};return e._dom.addEventListener("change",function(n){if(t.autoupload&&1==n.target.files.length&&i(e._dom),t.onSelectFile)for(var r=e._dom.files.length,s=0;r>s;s++){var o=e._dom.files[s];t.onSelectFile(o,o.type)}}),e.on("upload",function(){e._dom.files.length>=1&&i(e._dom)}),e},t.fileObjectThumbnail=function(t,e,n){var i=new FileReader,r=_e("img"),s=this;return r.width(t),r.height(e),i.onload=function(t){var e=r._dom;e.onload=function(){s.add(r)},e.src=t.target.result},i.readAsDataURL(n),r},t.get=function(t,e,n){var i=[];if(this.isFunction(e))n=e,this._httpsend(t,n,"GET",null);else{for(var r in e)i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));this._httpsend(t+(i.length?"?"+i.join("&"):""),n,"GET",null)}return this},t.getJSON=function(t,e,n){var i=[];if(this.isFunction(e))n=e,this._httpsend(t,function(t){n(JSON.parse(t))},"GET",null);else{for(var r in e)i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));this._httpsend(t+(i.length?"?"+i.join("&"):""),function(t){n(JSON.parse(t))},"GET",null)}return this},t.post=function(t,n,i,r){if(e&&e[t]){try{for(var s=0;s<e[t].length;s++){var o=e[t][s],a=o(n);if(a)return void i(a)}}catch(c){r&&r(c)}return this}var h=[];for(var u in n)h.push(encodeURIComponent(u)+"="+encodeURIComponent(n[u]));return this._httpsend(t,i,"POST",h.join("&"),r),this},t.postJSON=function(t,n,i,r){if(e&&e[t]){try{for(var s=0;s<e[t].length;s++){var o=e[t][s],a=o(n);if(a)return void i(a)}}catch(c){r(c)}return this}return this._httpsend(t,function(t){try{var e=JSON.parse(t);i&&i(e)}catch(n){r&&r(n)}},"POST",JSON.stringify(n),r),this},t.uploadHook=function(t,e){n||(n={}),n[t]=e}}(this),function(t){var e;t._findComp=function(){if(!this._compBaseData){var t=this._parent;return t?t._findComp():null}return this},t._findCustomElem=function(t){if(this._customElems){var n=this._customElems[t];if(n)return n}var i=this.parent();return i?i._findCustomElem(t):e?e[t]:void 0},t._initCustom=function(t,e,n,i,r){var s;if(t._compBaseData)s=t._compBaseData;else if(s=_data(e.data?JSON.parse(JSON.stringify(e.data)):e.getDefaultProps?e.getDefaultProps():{}),t._compBaseData=s,this.isObject(i)){var o=i;for(var a in o)o.hasOwnProperty(a)&&t.attr(a,o[a])}e.baseCss&&(t._customCssBase&&t.removeClass(t._customCssBase),t.addClass(e.baseCss._nameSpace),t._customCssBase=e.baseCss._nameSpace);var c=[];t._contentObj&&t._contentObj.forChildren(function(t){c.push(t)}),n&&(t._contentParent=n);for(var h in e)if(e.hasOwnProperty(h)){var u=e[h];if(this.isFunction(u)){!function(e){t.sendHandler(h,function(n,i,r){e.apply(t,[n,i,r])})}(u)}}if(e.webWorkers&&!this._workersAvailable())for(var h in e.webWorkers)if(e.webWorkers.hasOwnProperty(h)){var u=e.webWorkers[h];if(this.isFunction(u)){!function(e,n){t.sendHandler(n,function(n,i,r){e.apply(t,[n,i,r])})}(u,h)}}var f=s||i||{};if(r)t._compState=r;else if(e.getInitialState){var l=e.getInitialState.apply(t,[f]);t._compState=_data(l)}{var d=e.init;e.render}if(t._initWithDef=e,t._instanceVars={},e.requires||e._waitClass){var _=_promise(),p=_;if(e.requires&&(e.requires.js&&e.requires.js.forEach(function(e){_=_.then(function(){return t.appendToHead("js",e.url)})}),e.requires.css&&e.requires.css.forEach(function(e){_=_.then(function(){return t.appendToHead("css",e.url)})})),e._waitClass){_=_.then(function(){return e._waitClass}),t._workerObjId=this.guid();var m=this;_=_.then(function(){return m._createWorkerObj(e.customTag,t._workerObjId,t)}),_=_.then(function(){var n=e.webWorkers;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];m.isFunction(r)&&!function(e){t.sendHandler(e,function(n,i){m._callObject(t._workerObjId,e,n,i)})}(i)}})}_=_.then(function(){var n=d.apply(t,[f,e]);n&&(t._contentObj=n,n._contentParent=t,c.forEach(function(t){n.add(t)}))}),p.resolve(),t._uiWaitProm=_}else{var v=d.apply(t,[f,e]);v&&(t._contentObj=v,v._contentParent=t,c.forEach(function(t){v.add(t)}))}},t.composite=function(){var t=Array.prototype.slice.call(arguments);if(this._contentObj)return this._contentObj.composite.apply(this._contentObj,t);var e=this._constrArgs(t);if(!this._isStdElem(e.elemName)){var n=this._findCustomElem(e.elemName);if(n){var i,r=this.state();if(r&&r.hasOwn&&!r.hasOwn(n.customTag))if(e.data)r.set(n.customTag,e.data.toPlainData());else if(n.getInitialState){var s=n.getInitialState.apply(this,[]);r.set(n.customTag,s)}else r.set(n.customTag,{});if(r&&r.hasOwn(n.customTag)&&(i=r[n.customTag]),n.init||n.render){var o=_e(n.customTag,e.attrs,e.constr,i||e.data);return this.add(o),o}}}var a=this.shortcutFor.apply(this,t);return a},t.createClass=function(t,e){return this.customElement(t,e)},t.customElement=function(t,n){if(this._customElems||(this._customElems={}),e||(e={}),this._customElems[t]=n,e[t]=n,n.customTag=t,n.css){var i=this.css(t);n.css(i),n.baseCss=i}n.webWorkers&&this.isObject(n.webWorkers)&&this._workersAvailable()&&(n._waitClass=this._createWorkerClass(t,n.webWorkers)),this._addCustomTagFn(t)},t.getRegisteredClasses=function(){return e||{}},t.modifyCss=function(t,e){var n=this.getRegisteredClasses();if(e||(e=t,t=!1),t){var i=n[t];return i&&i.baseCss&&e(r,i.baseCss),this}for(var r in n)if((!t||r==t)&&n.hasOwnProperty(r)){var i=n[r];i.baseCss&&e(r,i.baseCss)}return this},t.props=function(){if(!this._compBaseData){var t=this._parent;return t?t.props():null}return this._compBaseData},t.ref=function(t){var e=this._findComp();if(e&&e._instanceVars){var n=e._instanceVars;if(n.refs)return n.refs[t]}},t.registerElement=function(t,e){return this.customElement(t,e)},t.state=function(){if(this._compState)return this._compState;if(this._initWithDef)return this._compState=_data({}),this._compState;var t=this._parent;return t?t.state():void 0}}(this),function(_myTrait_){var _callBackHash,_idx,_worker,_initDone,_objRefs,_threadPool,_maxWorkerCnt,_roundRobin,_objPool;_myTrait_._baseWorker=function(t){return{init:function(){this._initDone||(this._initDone=!0,this._classes={},this._instances={})},start:function(msg){if(this.init(),"call"!=msg.data.cmd||"/"!=msg.data.id){if("call"==msg.data.cmd&&msg.data.id){var ob=this._instances[msg.data.id];ob&&ob[msg.data.fn]&&ob[msg.data.fn].apply(ob,[msg.data.data,function(t){postMessage({cbid:msg.data.cbid,data:t})}])}}else{if("createClass"==msg.data.fn){var newClass,dataObj=JSON.parse(msg.data.data);eval("newClass = "+dataObj.code),this._classes[dataObj.className]=newClass,postMessage({cbid:msg.data.cbid,data:"Done"})}if("createObject"==msg.data.fn&&msg.data.data){var dataObj=JSON.parse(msg.data.data),newClass=this._classes[dataObj.className];if(newClass){var o_instance=Object.create(newClass);this._instances[dataObj.id]=o_instance,o_instance.send=function(t,e){postMessage({msg:t,data:e,ref_id:dataObj.id})},o_instance._ref_id=dataObj.id,postMessage({cbid:msg.data.cbid,data:"Done"})}}}}}},_myTrait_._callObject=function(t,e,n,i){var r=_objRefs[t];return r&&this._callWorker(_threadPool[r.__wPool],t,e,n,i),this},_myTrait_._callWorker=function(t,e,n,i,r){_worker&&(_callBackHash[_idx]=r,"object"==typeof i&&(i=JSON.stringify(i)),t.postMessage({cmd:"call",id:e,fn:n,cbid:_idx++,data:i}))},_myTrait_._createWorker=function(t){try{if("undefined"==typeof t&&_worker)return _worker;var e="var o = "+this._serializeClass(this._baseWorker())+"\n onmessage = function(eEvent) { o.start.apply(o, [eEvent]); } ",n=new Blob([e],{type:"text/javascript"}),i=new Worker(window.URL.createObjectURL(n));return _callBackHash||(_callBackHash={},_idx=1),_worker=i,i.onmessage=function(t){if("object"!=typeof t.data)console.error("Unknown message from the worker ",t.data);else{if(t.data.cbid){var e=_callBackHash[t.data.cbid];delete _callBackHash[t.data.cbid],e(t.data.data)}if(t.data.ref_id){var n=_objRefs[t.data.ref_id];if(n){var i=t.data.data;"object"==typeof i&&(i=JSON.stringify(i)),n.send(t.data.msg,i,function(){t.data.cbid})}}}},"undefined"!=typeof t&&(_threadPool[t]=i),i}catch(r){return null}},_myTrait_._createWorkerClass=function(t,e){var n=this.__promiseClass(),i=this;return new n(function(r){for(var s,o,a=i._serializeClass(e),c=0;_maxWorkerCnt>c;c++)!function(e){s?s=s.then(function(){return new n(function(n){i._callWorker(_threadPool[e],"/","createClass",{className:t,code:a},n)})}):o=s=new n(function(n){i._callWorker(_threadPool[e],"/","createClass",{className:t,code:a},n)})}(c);s.then(function(){r(!0)})})},_myTrait_._createWorkerObj=function(t,e,n){var i=this.__promiseClass(),r=this;return new i(function(i){var s=_roundRobin++%_maxWorkerCnt;n.__wPool=s,r._callWorker(_threadPool[s],"/","createObject",{className:t,id:e},function(t){_objRefs[e]=n,i(t)})})},_myTrait_._serializeClass=function(t){var e="{",n=0;for(var i in t)n++&&(e+=","),e+=i+" : "+t[i].toString();return e+="};"},_myTrait_._workersAvailable=function(){return _worker},_myTrait_.__traitInit&&!_myTrait_.hasOwnProperty("__traitInit")&&(_myTrait_.__traitInit=_myTrait_.__traitInit.slice()),_myTrait_.__traitInit||(_myTrait_.__traitInit=[]),_myTrait_.__traitInit.push(function(){if(!_initDone){_initDone=!0,_maxWorkerCnt=4,_roundRobin=0,_threadPool=[],_objRefs={};for(var t=0;_maxWorkerCnt>t;t++)this._createWorker(t)}})}(this),function(t){t.doReact=function(t,e){"undefined"!=typeof e&&(this._reactFn=e),this._reactFn&&this.patchWith(this._reactFn(t))},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){}),t.patchWith=function(t){if(t._tag!=this._tag)return this.replaceWith(t),this;var e,n;if(this._classes)var e=this._classes.join(" ");if(t._classes)var n=t._classes.join(" ");e!=n&&(this._classes=t._classes,this._dom.className=n?n:""),this._ev=t._ev;for(var i in t._attributes){var r=t._attributes[i];this._attributes[i]!=r&&(this._attributes[i]=r,this._dom.setAttribute(i,r))}for(var i in this._attributes)"undefined"==typeof t._attributes[i]&&(delete this._attributes[i],this._dom.removeAttribute(i,r));if("input"==this._tag||"textarea"==this._tag)t._value!=this._value;else if(0===t._children.length){var s=this._children.slice();s.forEach(function(t){t.remove()}),t._html!=this._html&&(this._html=t._html||"",this._dom.textContent=t._html)}else{t._html!=this._html&&(this._html=t._html||"",this._dom.textContent=t._html);for(var o=this._children.length-t._children.length,a=t._children.slice(),s=this._children.slice(),c=0;c<a.length;c++){var h=s[c];h?h.patchWith(a[c]):this.add(a[c])}for(;o>0;)s[c]&&s[c++].remove(),o--}}}(this);var _qc_prototype=function(){!function(t){t.attr=function(t,e){var n=this._host;if(!isNaN(t))return void("undefined"!=typeof console&&"undefined"!=typeof console.trace);if(this._host._svgElem){if(this._host.isObject(e)&&e.onValue){var i=this;return e.onValue(function(e){"undefined"!=typeof e&&null!==e&&("xlink:href"==t?i._dom.setAttributeNS("http://www.w3.org/1999/xlink","href",e):i._dom.setAttributeNS(null,t,e))}),this}if(this._host.isArray(e)){var r,s=e[0],o=e[1],a=s[o](),i=this,c=i._dom,n=this._host;return r="xlink:href"==t?n.uniqueListener("attr:"+t,function(t,e){"undefined"!=typeof e&&null!==e&&c.setAttributeNS("http://www.w3.org/1999/xlink","href",e)}):n.uniqueListener("attr:"+t,function(e,n){"undefined"!=typeof n&&null!==n&&c.setAttributeNS(null,t,n)}),s.on(o,r),"undefined"!=typeof a&&null!==a&&("xlink:href"==t?this._dom.setAttributeNS("http://www.w3.org/1999/xlink","href",a):this._dom.setAttributeNS(null,t,a)),this}if(this._host.isFunction(e)){var r,a=e(),s=e(null,!0),i=this,c=i._dom,n=this._host;return r="xlink:href"==t?n.uniqueListener("attr:"+t,function(t,e){"undefined"!=typeof e&&null!==e&&c.setAttributeNS("http://www.w3.org/1999/xlink","href",e)}):n.uniqueListener("attr:"+t,function(e,n){"undefined"!=typeof n&&null!==n&&c.setAttributeNS(null,t,n)}),s.me.on(s.name,r),"undefined"!=typeof a&&null!==a&&("xlink:href"==t?this._dom.setAttributeNS("http://www.w3.org/1999/xlink","href",a):this._dom.setAttributeNS(null,t,a)),this}return"undefined"!=typeof e&&("xlink:href"==t?this._dom.setAttributeNS("http://www.w3.org/1999/xlink","href",e):this._dom.setAttributeNS(null,t,e)),this}if(this._host.isArray(e)){var r,s=e[0],o=e[1],a=s[o](),i=this,c=i._dom,n=this._host;return r=n.uniqueListener("attr:"+t,function(e,i){"undefined"!=typeof i&&null!==i&&(n._attributes[t]=i,c.setAttribute(t,i))}),s.on(o,r),"undefined"!=typeof a&&null!==a&&("xlink:href"==t?this._dom.setAttributeNS("http://www.w3.org/1999/xlink","href",a):(n._attributes[t]=a,this._dom.setAttributeNS(null,t,a))),this}if(this._host.isObject(e)&&e.onValue){var i=this;return e.onValue(function(e){"undefined"!=typeof e&&null!==e&&("xlink:href"==t?i._dom.setAttributeNS("http://www.w3.org/1999/xlink","href",e):(n._attributes[t]=e,i._dom.setAttributeNS(null,t,e)))}),this}if(this._host.isFunction(e)){var a=e(),s=e(null,!0),i=this,c=i._dom,n=this._host,r=n.uniqueListener("attr:"+t,function(e,i){"undefined"!=typeof i&&(n._attributes[t]=i,c.setAttribute(t,i))});return s.me.on(s.name,r),"undefined"!=typeof a&&isNaN(t)&&(n._attributes[t]=a,this._dom.setAttribute(t,a)),this}return"undefined"!=typeof e&&isNaN(t)&&(n._attributes[t]=e,this._dom.setAttribute(t,e)),this},t.bindSysEvent=function(t,e,n){if(t=t.toLowerCase(),this._sys||(this._sys={}),this._sys[t])return!1;this._sys[t]=!0;var i=this;return this._dom.attachEvent?this._dom.attachEvent("on"+t,function(t){t=t||window.event,i._event=t,e(),n&&(t=window.event,t&&(t.cancelBubble=!0))}):this._dom.addEventListener(t,function(t){t=t||window.event,i._event=t,n&&(t&&t.stopPropagation?t.stopPropagation():(t=window.event,t.cancelBubble=!0)),e()}),!0},t.blur=function(){this._dom.blur&&this._dom.blur()},t.css=function(t,e){return"background-color"==t&&(t="backgroundColor"),"margin-left"==t&&(t="marginLeft"),"font-size"==t&&(t="fontSize",e=this.pxParam(e)),("left"==t||"top"==t||"bottom"==t||"right"==t||"width"==t||"height"==t)&&(e=this.pxParam(e)),e.substring&&"NaN"==e.substring(0,3)?void 0:(this._dom.style[t]=e,this)},t.focus=function(){this._dom.focus&&this._dom.focus()},t.get=function(){return this._dom},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t,e){this._dom=t,this._host=e}),t.pxParam=function(t){if("auto"==t)return t;if("undefined"!=typeof t.slice){if("%"==t.slice(-1))return t;if("em"==t.slice(-2))return t;if("px"==t.slice(-2))return t}if(isNaN(parseInt(t)))return"";if("string"==typeof t)return parseInt(t)+"px";var e=parseInt(t);return isNaN(e)?void 0:e+"px"}}(this)},_qc=function(t,e,n,i,r,s,o,a){var c,h=this;if(!(h instanceof _qc))return new _qc(t,e,n,i,r,s,o,a);var u=[t,e,n,i,r,s,o,a];if(h.__factoryClass)if(h.__factoryClass.forEach(function(t){c=t.apply(h,u)}),"function"==typeof c){if(c._classInfo.name!=_qc._classInfo.name)return new c(t,e,n,i,r,s,o,a)}else if(c)return c;h.__traitInit?h.__traitInit.forEach(function(t){t.apply(h,u)}):"function"==typeof h.init&&h.init.apply(h,u)};_qc._classInfo={name:"_qc"},_qc.prototype=new _qc_prototype;var later_prototype=function(){!function(t){var e,n,i,r,s,o,a,c;t._easeFns=function(){a={bounceOut:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeIn:function(t){return t*t},easeOut:function(t){return-1*t*(t-2)},easeInOut:function(t){return.5>t?t*t:-1*t*(t-2)},easeInCirc:function(t){return-1*(Math.sqrt(1-t*t)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(1-t)*(1-t)*(1-t)+1},pow:function(t){return Math.pow(t,parseFloat(1.5-t))},linear:function(t){return t}}},t.add=function(t,e,i){if(e||i){var r;"[object Array]"===Object.prototype.toString.call(i)?r=i:(r=Array.prototype.slice.call(arguments,2),r||(r=[])),n.push([e,t,r])}else n.push(t)},t.addEasingFn=function(t,e){a[t]=e},t.after=function(t,e,n){n||(n="aft7491_"+o++),r[n]={step:Math.floor(1e3*t),fn:e,nextTime:0,remove:!0}},t.asap=function(t){this.add(t)},t.ease=function(t,e,n,i){var r=a[t];r||(r=a.pow);var s="e_"+o++;c[s]={easeFn:r,duration:e,cb:n,over:i}},t.every=function(t,e,n){n||(n="t7491_"+o++),r[n]={step:Math.floor(1e3*t),fn:e,nextTime:0}},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){if(!e){this._easeFns(),o=1,this.polyfill();var t,a;if("undefined"!=typeof window){var t=window.requestAnimationFrame,a=window.cancelRequestAnimationFrame;["","ms","moz","webkit","o"].forEach(function(e){t||(t=window[e+"RequestAnimationFrame"],a=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"])})}var h=new Function("try { return this == global; } catch(e) { return false; }")();h?t=function(t){return setImmediate(t)}:t||(t=function(t){return setTimeout(t,16)}),a||(a=function(t){clearTimeout(t)}),n=[],i={},r={},s=[],c={};var u=0,f=function(){var e=(new Date).getTime(),o=u-e;0==u&&(o=0);for(var a;a=n.shift();)"[object Array]"===Object.prototype.toString.call(a)?a[1].apply(a[0],a[2]):a();for(var h=0;h<s.length;h++){var l=s[h];l()}for(var d in c)if(c.hasOwnProperty(d)){var _=c[d];_.start||(_.start=e);var p=e-_.start,m=p/_.duration;m>=1&&(m=1,delete c[d]),_.cb(_.easeFn(m)),1==m&&_.over&&_.over()}for(var d in i)if(i.hasOwnProperty(d)){var _=i[d];_[0](_[1]),delete i[d]}for(var d in r)if(r.hasOwnProperty(d)){var _=r[d];_.nextTime<e&&(_.remove?_.nextTime>0?(_.fn(),delete r[d]):_.nextTime=e+_.step:(_.fn(),_.nextTime=e+_.step)),_.until&&_.until<e&&delete r[d]}t(f),u=e};f(),e=!0}}),t.once=function(t,e,n){i[t]=[e,n]},t.onFrame=function(t){s.push(t)},t.polyfill=function(){},t.removeFrameFn=function(t){var e=s.indexOf(t);return e>=0?(t._onRemove&&t._onRemove(),s.splice(e,1),!0):!1}}(this)},later=function(t,e,n,i,r,s,o,a){var c,h=this;if(!(h instanceof later))return new later(t,e,n,i,r,s,o,a);var u=[t,e,n,i,r,s,o,a];if(h.__factoryClass)if(h.__factoryClass.forEach(function(t){c=t.apply(h,u)}),"function"==typeof c){if(c._classInfo.name!=later._classInfo.name)return new c(t,e,n,i,r,s,o,a)}else if(c)return c;h.__traitInit?h.__traitInit.forEach(function(t){t.apply(h,u)}):"function"==typeof h.init&&h.init.apply(h,u)};later._classInfo={name:"later"},later.prototype=new later_prototype,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(__amdDefs__.later=later,this.later=later):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.later=later:this.later=later}.call(new Function("return this")());var css_prototype=function(){!function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return"undefined"==typeof t?this.__isA:"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return"undefined"==typeof t?this.__isO:t===Object(t)}}(this),function(t){var e,n,i,r,s,o,a,c,h,u,f;t._assign=function(t){var e,n={};return e=this.isArray(t)?t:Array.prototype.slice.call(arguments),e.forEach(function(t){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];null===i||i===!1?delete n[e]:n[e]=t[e]}}),n},t.hasOwnProperty("__factoryClass")||(t.__factoryClass=[]),t.__factoryClass.push(function(t,e){if(t||(t="_global_"),e&&(t+="/"+e),s){if(s[t])return s[t];s[t]=this}else s={},s[t]=this}),t.animation=function(t,e){var n=Array.prototype.slice.call(arguments),t=n.shift(),e=n.shift(),i=t+"-keyframes",r=0,s=this,o="",a=this._cssScope||"";n.forEach(function(t){if(s.isObject(t)){var e;e=parseInt("undefined"!=typeof t.time?100*parseFloat(t.time):100*r),0>e&&(e=0),e>100&&(e=100),o+=e+"% "+s.ruleToCss(t)+" \n",r=1}else r=t});var c="",h=["","-o-","-moz-","-webkit-"];h.forEach(function(t){c+="@"+t+"keyframes "+i+a+" { "+o+" } \n"}),this._animations[i+a]=c;if(this.isObject(e)){var u=this.animSettings(e);u["animation-name"]=i+a,this.bind("."+t,u)}else this.bind("."+t,{animation:i+a+" "+e})},t.animSettings=function(t){if(this.isObject(t)){var e={};for(var n in t)t.hasOwnProperty(n)&&("duration"==n||"iteration-count"==n?e["animation-"+n]=t[n]:e[n]=t[n]);return e}return{}},t.assign=function(){var t=Array.prototype.slice.call(arguments),e=t[0];this._data[e]||(this._data[e]=[]);for(var n=1,i=3;t[n];)if(this._data[e].length>=i){var r=t[n],s=this._data[e][this._data[e].length-1];for(var o in r)r.hasOwnProperty(o)&&(s[o]=r[o]);n++}else this._data[e].push(t[n]),n++;return this._dirty=!0,a=!0,this},t.bind=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();return this._data[e]=t,this._dirty=!0,a=!0,this},t.buildCss=function(t){if(this._data){t||(t=this._mediaRule);var e={};for(var n in this._data)if(this._data.hasOwnProperty(n)){var i=this._data[n];this._composedData[n]&&(i=[this._composedData[n]].concat(i)),e[n]=this._assign(i)}this._composedData=e,this.updateStyleTag(this.makeCss(e,t))}},t.collectAnimationCss=function(){var t=this._animations,e="";for(var n in t)t.hasOwnProperty(n)&&(e+=t[n]);return e},t.convert=function(t,e){var n,i="";if(e&&e.indexOf&&(n=e.indexOf("-gradient"))>=0){for(var s=n-1,o=n+8,a=!1,c="lineardg-wbktmozp";c.indexOf(e.charAt(s))>=0;)if(s--,0>=s){s=0;break}for(var h=1;"("!=e.charAt(o++););for(;h>0;)if("("==e.charAt(o)&&h++,")"==e.charAt(o)&&h--,o++,e.length<o){a=!0;break}if(!a){var u=e.substring(s,o),f=e.substring(0,s),l=e.substring(o),i="";["-webkit-","","-moz-","-o-"].forEach(function(e){i+=t+" : "+f+" "+e+u+l+";\n"})}}return r[t]?i=r[t](t,e):i+=t+" : "+e+";\n",i},t.forMedia=function(t){var e=css(this._cssScope,t);return this._mediaHash||(this._mediaHash={}),this._mediaHash[t]||(this._mediaHash[t]=e),e},t.forRules=function(t){for(var e in this._data)this._data.hasOwnProperty(e)&&t.apply(this,[e,this._assign(this._data[e])])},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t,n){if(this._data=this._data||{},this._animations={},this._composedData=this._composedData||{},this._mediaRule=n,this._cssScope=t||"",!e){c=[];later().every(.1,function(){if(a){a=!1;for(var t in s)if(s.hasOwnProperty(t)){var e=s[t];e._dirty&&(e.buildCss(),e._dirty=!1,e._firstUpdate&&(e._firstUpdate(),delete e._firstUpdate))}u&&f&&(f.styleSheet.cssText=c.join(" "))}})}o||(o={});var i=t||"_global_";n&&(i+="/"+n),o[i]||(o[i]=!0,this.initConversions())}),t.initConversions=function(){h||(h=0),!window.atob&&document.all&&(u=!0),this._virtualTagId=h++,c[this._virtualTagId]="",n=function(t,e){var n="";return n+="-o-"+t+":"+e+";\n",n+="-moz-"+t+":"+e+";\n",n+="-webkit-"+t+":"+e+";\n",n+=t+":"+e+";\n"},i=function(t,e){var n="";return n+="-o-"+t+":-o-"+e+";\n",n+="-moz-"+t+":-moz-"+e+";\n",n+="-webkit-"+t+":-webkit-"+e+";\n",n+=t+":"+e+";\n"},r={"border-radius":function(t,e){return n(t,e)},"box-shadow":function(t,e){return n(t,e)},rotate:function(t,e){return t="transform",e="rotate("+parseInt(e)+"deg)",n(t,e)},transition:function(t,e){return i(t,e)},filter:function(t,e){return n(t,e)},animation:function(t,e){return n(t,e)},"animation-iteration-count":function(t,e){return n(t,e)},"animation-fill-mode":function(t,e){return n(t,e)},"transition-timing-function":function(t,e){return n(t,e)},"animation-name":function(t,e){return n(t,e)},"animation-timing-function":function(t,e){return n(t,e)},"animation-duration":function(t,e){return n(t,e)},transform:function(t,e){return n(t,e)},"transform-style":function(t,e){return n(t,e)},"transform-origin":function(t,e){return n(t,e)},perspective:function(t,e){return n(t,e)},"text-shadow":function(t,e){return n(t,e)},opacity:function(t,e){e=parseFloat(e);var i='-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity='+parseInt(100*e)+')";';return i+="filter: alpha(opacity="+parseInt(100*e)+");",i+=n(t,e)}}},t.makeCss=function(t,e){var n=e?e+"{":"";for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];if(this._cssScope){var s=this.ruleToCss(r);n+="."+this._cssScope+" "+i+s+" ",n+=i+"."+this._cssScope+" "+s}else n+=i+this.ruleToCss(r)}return n+=this.collectAnimationCss(),n+=e?"}\n":""},t.mediaFork=function(t){return css(this._cssScope,t)},t.ruleToCss=function(t){var e="{";for(var n in t)"time"!=n&&(e+=this.convert(n,t[n]));return e+="}\n"},t.updateStyleTag=function(t){try{if(u){if(!f){e=document.getElementsByTagName("head")[0];var n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet.cssText="",f=n,e.appendChild(n)}c[this._virtualTagId]=t}else{var n;if(!this._styleTag){e=document.getElementsByTagName("head")[0];var n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText="":n.appendChild(document.createTextNode("")),e.appendChild(n),this._styleTag=n}n=this._styleTag;var i=n.firstChild;n.appendChild(document.createTextNode(t)),"undefined"!=typeof i&&n.removeChild(i)}}catch(r){console&&console.log&&console.log(r.message,t)}}}(this)},css=function(t,e,n,i,r,s,o,a){var c,h=this;if(!(h instanceof css))return new css(t,e,n,i,r,s,o,a);var u=[t,e,n,i,r,s,o,a];if(h.__factoryClass)if(h.__factoryClass.forEach(function(t){c=t.apply(h,u)}),"function"==typeof c){if(c._classInfo.name!=css._classInfo.name)return new c(t,e,n,i,r,s,o,a)}else if(c)return c;h.__traitInit?h.__traitInit.forEach(function(t){t.apply(h,u)}):"function"==typeof h.init&&h.init.apply(h,u)};css._classInfo={name:"css"},css.prototype=new css_prototype,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(__amdDefs__.css=css,this.css=css):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.css=css:this.css=css}.call(new Function("return this")());var clipBoard_prototype=function(){!function(t){var e;t.del=function(t){this.localStoreSupport()?localStorage.removeItem(t):this.set(t,"",-1)},t.fromClipboard=function(){var t=this.get(this._name),e=JSON.parse(t);return e},t.get=function(t){if(this.localStoreSupport())return localStorage.getItem(t);for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t){this._name=t}),t.localStoreSupport=function(){if(e)return e;try{return e="localStorage"in window&&null!==window.localStorage}catch(t){return!1}},t.set=function(t,e,n){if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="; expires="+i.toGMTString()}else var r="";this.localStoreSupport()?localStorage.setItem(t,e):document.cookie=t+"="+e+r+"; path=/"},t.toClipboard=function(t){return this.set(this._name,JSON.stringify(t)),this}}(this)},clipBoard=function(t,e,n,i,r,s,o,a){var c,h=this;if(!(h instanceof clipBoard))return new clipBoard(t,e,n,i,r,s,o,a);var u=[t,e,n,i,r,s,o,a];if(h.__factoryClass)if(h.__factoryClass.forEach(function(t){c=t.apply(h,u)}),"function"==typeof c){if(c._classInfo.name!=clipBoard._classInfo.name)return new c(t,e,n,i,r,s,o,a)}else if(c)return c;h.__traitInit?h.__traitInit.forEach(function(t){t.apply(h,u)}):"function"==typeof h.init&&h.init.apply(h,u)};clipBoard._classInfo={name:"clipBoard"},clipBoard.prototype=new clipBoard_prototype,function(t){var e,n,i,r,s,o,a;t.__promiseClass=function(){var t;return"undefined"!=typeof _promise&&(t=_promise),t||"undefined"==typeof Promise||(t=Promise),t},t.__singleton=function(){return e},t.hasOwnProperty("__factoryClass")||(t.__factoryClass=[]),t.__factoryClass.push(function(t,e){if(t&&s&&s[t]){var n=s[t];return new n(t,e)}}),t._constrArgs=function(t){var e={},n=this;return e.elemName=t.shift(),t.forEach(function(t){return"string"==typeof t?void(e.classStr=t):n.isObject(t)&&n.isFunction(t.getID)?void(e.data=t):n.isStream(t)?void(e.stream=t):n.isObject(t)&&!n.isFunction(t)?void(e.attrs=t):n.isFunction(t)?void(e.constr=t):void 0}),e},t._isStdElem=function(t){return o[t]},t.extendAll=function(e,n){if(this.isObject(e)){for(var i in e)e.hasOwnProperty(i)&&this.extendAll(i,e[i]);return this}return t[e]||(t[e]=n),this},t.getComponentRegistry=function(){return s},t.getElemNames=function(){return a},t.globalState=function(){var t={transform:"translate(-2000px,0px)"},e={transform:"translate(0,0)"};css().animation("viewOut",{duration:"0.4s","iteration-count":1},e,.5,t,t),css().animation("viewIn",{duration:"0.4s","iteration-count":1},t,.5,e,e),String.prototype.trim||!function(){var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
String.prototype.trim=function(){return this.replace(t,"")}}();var i=n=function(){var t={},e=1,n={},i={},r={},s=!1,o=null,a=[],c=!1,h={x:0,y:0},u={sx:0,sy:0,dx:0,dy:0};t._cssfactor=1,t.domIndex={};t.addListener=function(e,n){r[e]||(r[e]=[]);var i=!1;return r[e].forEach(function(t){t==n&&(i=!0)}),i?void 0:(r[e].length>0?r[e][0]=n:r[e].push(n),t)},t.removeListener=function(e,n){if(r[e]){for(var i=r[e],s=i.length,o=0;s>o;o++){var a=i[o];if(a==n){r[e].splice(o,1);break}}return t}};var f=2;t.popZ=function(){return f++},t.addEventListener=function(t,e,n){return e=e.toLowerCase(),t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n),!0},t.mouse=function(){return h},t.pxParam=function(t){if("string"==typeof t)return parseInt(t)+"px";var e=parseInt(t);return isNaN(e)?void 0:e+"px"},t.bexp=function(t,e){var n="";return n+="-o-"+t+":"+e+";\n",n+="-moz-"+t+":"+e+";\n",n+="-webkit-"+t+":"+e+";\n",n+=t+":"+e+";\n"},t.addEventListener(document,"mousemove",function(t){t=t||window.event,t.pageX?(h.x=t.pageX,h.y=t.pageY):(h.x=t.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),h.y=t.clientY+(document.documentElement.scrollTop||document.body.scrollTop)),s&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,u.mx=h.x,u.my=h.y,u.dx=h.x-u.sx,u.dy=h.y-u.sy,o&&o.trigger("drag",u))}),t.setDragged=function(t){s=!0,o=t},t.dragMouseUp=function(){o&&o.trigger("enddrag",u),s=!1,o=null},t.dragMouseDown=function(e){if(c=!0,!s){var n=!1,i=[];if(e?i.push(e):(a.forEach(function(t){t.isHovering()&&i.push(t)}),i.sort(function(t,e){return t.z&&e.z?e.z()-t.z():0})),i[0]){var r=i[0],o=r.offset();return t.setDragged(r),u.sx=h.x,u.sy=h.y,u.mx=h.x,u.my=h.y,u.dx=0,u.dy=0,u.x=o.left,u.y=o.top,n=!0,r.trigger("startdrag",u),!0}}},t.addEventListener(document,"mouseup",function(){t.dragMouseUp()}),t.addEventListener(document,"mousedown",function(e){t.dragMouseDown()&&(e=e||window.event,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1)});var l=!1;return t.send=function(t,e,n,r){if(!l&&t.__id){l=!0;var s=t.__id(),o=i[s];if(o){var a=o[e];a&&a.forEach(function(t){t!=r&&t.trigger(n)})}l=!1}},t.bind=function(e,n,r){e.__id||t.data(e);var s=e.__id(),o=i[s];o||(i[s]={},o=i[s]);var a=o[n];a||(o[n]=[],a=o[n]);for(var c=a.length,h=0;c>h;h++)if(a[h]==r)return t;return a.push(r),t},t.data=function(t){if(!t.__fn){e++;{(function(e){t.__id=function(){return"gd"+e}})(e)}n[t.__id()]=t}return t},t.draggable=function(t){a.push(t),t.isHovering();var e=t;t.touchevents(),t.on("touchstart",function(){var n=e.offset(),i=t.touch(0);u.sx=i.startX,u.sy=i.startY,u.dx=0,u.dy=0,u.mx=i.startX,u.my=i.startY,u.x=i.startX-n.left,u.y=i.startY-n.top,s=!0,t.trigger("startdrag",u)}),t.on("touchmove",function(){var e=t.touch(0);u.dx=e.dx,u.dy=e.dy,u.mx=e.startX+e.dx,u.my=e.startY+e.dy,s=!0,t.trigger("drag",u)}),t.on("touchend",function(){var e=t.touch(0);u.dx=e.dx,u.dy=e.dy,u.mx=e.startX+e.dx,u.my=e.startY+e.dy,t.trigger("enddrag",u),s=!1})},t}();return i},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){var t=Array.prototype.slice.call(arguments),e=this._constrArgs(t);this.initAsTag.apply(this,[e.elemName,e.attrs,e.constr,e.data])}),t.initAsTag=function(t,a,c,h){if(this.isObject(t))this._dom=t,t=this._dom.tagName,"input"==t&&"checkbox"==this._dom.getAttribute("type")&&(t="checkbox");else if(t&&t.charAt&&"#"==t.charAt(0)){var u=document.getElementById(t.substring(1));u&&(t=u.tagName,this._dom=u)}this._attributes={};var f;this.isFunction(a)&&(f=a),this.isFunction(c)&&(f=c),s||(s={}),t||(t="div");var l,d=t.split(".");d[1]&&(t=d[0],l=d[1]),e||(this.initElemNames(),e=n=this.globalState(),r={circle:"true",rect:!0,path:!0,svg:!0,image:!0,line:!0,text:!0,tspan:!0,g:!0,pattern:!0,polygon:!0,polyline:!0,clippath:!0,defs:!0,feoffset:!0,femerge:!0,femergenode:!0,fegaussianblur:!0,filter:!0});var _,p="http://www.w3.org/2000/svg",m=t;if(t=t.toLowerCase(),o[t]||r[t]||(_=this._findCustomElem(m),_&&(this._customElement=_,this._customAttrs=this.isObject(a)?a:{},t=_.tagName||"div")),i||(this.initScreenEvents(),i=!0),r[t]&&(this._svgElem=!0,this._svg=!0),this._type=t,this._tag=t.toLowerCase(),"checkbox"==this._type&&(this._checked=!1,this._tag="input"),this._children=[],"svg"==t&&(this._svg=!0),this._dom||("svg"==t?(this._dom=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._dom.setAttribute("xmlns","http://www.w3.org/2000/svg"),this._dom.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink")):this._dom=this._svgElem?document.createElementNS(p,m):document.createElement(this._tag)),this.q=new _qc(this._dom,this),this._svg&&(this._svgAttributes={}),"checkbox"==this._type&&this.q.attr("type","checkbox"),!this._svg&&l&&this.addClass(l),!this._component&&a&&"undefined"!=typeof a.appendChild&&a.appendChild(this._dom),_&&this._initCustom(this,_,null,this._customAttrs||{},h),this.isFunction(f))if(this._uiWaitProm){var v=this;this._uiWaitProm.then(function(){v._contentObj?f.apply(v._contentObj,[v._contentObj]):f.apply(v,[v])})}else this._contentObj?f.apply(this._contentObj,[this._contentObj]):f.apply(this,[this])},t.initElemNames=function(){if(!o){a=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","sampe","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],o={},a.forEach(function(t){o[t]=!0});var t=this;a.forEach(function(e){var n={};n[e+"End"]=function(){return this.parent()},t.extendAll(n)})}},t.registerComponent=function(t,e){s[t]||(s[t]=e)}}(this)},_e=function(t,e,n,i,r,s,o,a){var c,h=this;if(!(h instanceof _e))return new _e(t,e,n,i,r,s,o,a);var u=[t,e,n,i,r,s,o,a];if(h.__factoryClass)if(h.__factoryClass.forEach(function(t){c=t.apply(h,u)}),"function"==typeof c){if(c._classInfo.name!=_e._classInfo.name)return new c(t,e,n,i,r,s,o,a)}else if(c)return c;h.__traitInit?h.__traitInit.forEach(function(t){t.apply(h,u)}):"function"==typeof h.init&&h.init.apply(h,u)};_e._classInfo={name:"_e"},_e.prototype=new _e_prototype,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(__amdDefs__._e=_e,this._e=_e):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports._e=_e:this._e=_e}.call(new Function("return this")()),"undefined"!=typeof define&&null!==define&&null!=define.amd&&define(__amdDefs__)}).call(new Function("return this")());